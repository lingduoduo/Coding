# ByteDance

LC146

先聊背景，问了很多关于我们组的相关业务。问了一些简单的数据结构，同步和异步区别，sql index的实现，这个没答出来。然后做一个道题，是类似刷题网 饿玲玲 那道题，但是要求计算每个island的点的个数，然后print到对应点上，比如
1 1 1        4 4 4
1 0 0 ->    4 0 0
0 0 1        0 0 1

类似刷题网 斯伞期。要求输出所有路径。这道题当初做的时候就没有用到最优解，只给出了O (n ^ 2)的解。

面试总共是三轮，这周三面完，ENG 职位
1. coding
第一题：一组数中，求一个最小除数可以使数组中所有数被除以后的和大于k，感觉没有在 LT 见过
第二题：矩阵找从入口到出口的升序最短路径，应该是一个 LT 原题
2. system design
email system，答的不是特别好。本来说这轮是 coding，面试官来了才说是 design，我还没有准备好...
3. behavior round
就常见的 behavior questions，尽量体现自己在每一个问题里扮演的角色以及体现一方面的 strength

三面：⑤似贰
四面：贰40 

开头半小时详细问了简历和基础知识，还记得点有:. 1point3acres
mongo vs sql, in log, index, 是否支持transaction, etc
b+ tree vs b- tree
lots of details in b+ tree
redis常见数据结构和用法

然后15分钟做了道题: edit distance

第一面是国内的面试官，主要就是问问经历，谈谈现在做的项目，聊了很久没太多时间就随便选了道easy题' permutation

第二面是国内面试官，系统设计，scheduled job service。

第三面是hiring manager， lru cache，主要还是谈工作经历，还问到了cache的存储。

第一轮和国内工程师视频面，非常考查知识的广度，只出了一道算法(儿司令)大概几分钟就搞定了，剩下的全是问答。面试官会从简历出发看用到的技术背景，高频题可以搜得到, 包括编程语言的Basics，Network layers, Data base底层实现, API相关知识，Kafka & Big Data的问答等等。问题和个人背景有关，不是每个人都会被问到一样的问题。

第二轮是和美国这边的项目负责人聊，主要是deep dive项目，没有算法。

第三轮是和国内的大老板聊，设计自动售货机，聊简历以及deep dive项目, BQ。也没有算法。

湾区MTV office 面试
面过第一轮以后1天HR 发邮件第二轮和Manager 这周面
职位tech Manager

第一轮大概聊了相关经验，machine learning 的项目和很多细节
考的题是 判断一系列等式是否成立
a=b b=c  c!=a  false
a=b b=c  c!=d true

算法是先sort一次吧所有的等于放在前面，在用并查集 Union find 去union 所有的等于.
遇到不等就查是否他们的parent 一样，一样就false。
我感觉难度属于mid-hard

国人姐姐面试官，说是在ads组，说话慢慢的。题最近出现过，是一个2d matrix，其中有0有别的数，0是不可访问的点。然后找path sum最大的一条path。

第一轮：在美国的小哥哥，体验最好的一轮，全程英语交流流畅，还不错
第二轮：中国大哥：也还算不错，除了直接抛出来一道题目，给了我目标的complexity有点奇怪，别的还挺顺畅
第三轮：中国小伙（不知道是不是hm）先是迟到10min，然后聊了聊建简历，似乎听不太懂英文我说了一堆我英文简历上的东西感觉在对牛弹琴

直接上干货
刷题网 幺零零六
刷题网 一三五儿

Merge smallest pairs in array. [1,1,2,3,4] => [2,2,3,4] => [4,3,4] => return [3,8].
Use heap.

先10分钟聊天，问了我现在做什么
findMedian，用两个heap做了，自己run了几个test case，过了。
然后面试官说要是input是空的时候怎么办，这个case我没考虑到，然后我就说返回null或者throw exception，然后面试官，那就假设这种情况不会发生吧

然后说现在有capacity，超过capacity的element，least recent的会被remove，还是findMedian

然后我说改一下PriorityQueue的Comparator，没reach capacity的时候按value排，reach了按insert position( 其实我想先说一个initial thoughts，然后再讨论， 结果关于这个我解释了好久)

最后证明pop的Time complexity还是O（N），然后说有没有remove一个object是logN的数据结构，面试官说往tree上想，我说BST，但我还是不知道怎么用。。。他说很close了，用两个BST就行了

类似Binary Tree Maximum Path Sum。一共分成了两问，第一部分求从root开始的sum，第二部分要求从任何node开始。

第一轮：
面试官很nice：
第一道题就是求number of largest subtree: 蠡口散散散
使用recursion，但是每次需要返回subtree的val range和number of largest subtree；秒了

第二道题就是求 Missing Element in Sorted Array: 蠡口一0路0
使用binary search；秒了

第二轮：上来问了简历20分钟，然后上算法
第一道题就是求Binary Search Tree Iterator: 蠡口一器散
使用stack preorder traversal；秒了

第二道题就是求word split（稍微有点不同）: 蠡口一司0
最开始考虑用trie，提醒可以考虑backtrack
使用backtracking（最后没有时间，没有最后写完，但是大的点都写出来）；

一面是director面，深挖简历和项目，各种domain knowledge, 不停challenge 你项目的design decision为什么要这么做。楼主都有点被问懵了。之后写了一个非常基础的binary tree bfs. 又接着问项目，要求把现在做的service的完整architecture 讲出来，并深入问了一些domain 里的算法。这段楼主基本上就是bullshit 了。还没收到结果，但是感觉要跪。 求大米安慰。

力扣 336

第一轮：给一个list of list of integer, 每个sublist都是sorted，实现一个iterator，有next（）和hasNext()。我用的堆，然后把每个list的第一个元素接入堆里，当从堆里移除一个元素后，把list里的下一个元素再加进来，没有就算了。跑了test case， bug free、、
第二轮：1. 力扣 要吴凌四 类似，submatrix 是square，我用的2维dp，dp[i, j] = 1 + Max(dp[i-1, j], dp[i-1, j-1], dp[i, j-1]), 也就是dp[i,j]是以这个cell为右下角的最大全为1的square是多大，然后返回dp这个matrix的元素和就可以了。测试跑了，bug free。从brute force一步一步优化过来的，两人达成一致后才写的代码

2. 要四巴尔，我用的priority queue，把distinct的bloom days放进去，然后pop一个检查一个。这方法确实没有binary search 快，但也是一起从brute force一起慢慢优化来的，面试官觉得可以的。

刷题网 四要领

蠡口 散而久

第一题 数据流中位数 里扣 耳酒舞
第二题 滑窗中位数 利口 寺吧灵

利口 药霰肆舞

尔幺凌

电面1： 一个matrix of integers 找sum最大的path 不可重复  -》 dfs/bfs都行

电面2： 一个matrix of integers 两个边长是河... 问从另外两边可以到为河水的两边的可能性走法。。。 -也是dfs/bfs都可

电面3： 系统设计  设计一个鉴别广告spam的database 重点侧重于这个table如何设计

武陵久

给一个字符串，找包括了这个字符串内所有unique的字符的最短字符串。 "abbcaaaa" -> "abbc

第一轮交流蛮愉快，一道常规hard，followup hard
第二三轮给我的感觉就是面试官根本没有准备，直接搜了题扔你脸上，不讨论，不交流，基本不好好回应。test case也是直接复制粘贴，然后对比你跑出来的结果和lc的结果？
第二轮dfs题，medium 上来我说可以brute force dfs每个点，但我估计可能会优化所以我就一直在想怎么存起来优化。折腾来折腾去估计人看我折腾不出来说那你直接做第一个方法吧，然后我很快写完bug free跑了。然后followup是同时要打印出来，加个global variable也跑出来了。剩下的时间我就一直在那里想怎么调优。差不多40分钟时间10分钟写了第一个解剩下的时间想怎么调优。面完出来找题发现其实并不能调优。也是我自己菜证明不了这道题只能有第一个做法。但是还是觉得面试官一点点也不愿意交流吧。体验极差
第三轮也是道graph题，变形题，medium偏hard

寺兒溜

第一道股票，貌似不是刷题网的题，这个可以手持多支股票。每天可以选择买或者卖或者啥都不做。比如 2 3 4 5 2 4，这个最大利润是8. 第四天和第六天卖，其他时间买。最后居然没做出来。。

第二道soduku判断是否合法

ound 1: 国内大哥. 基础知识40mins. 从背景做的项目 到kafka 基础知识, Elastic search 基础, 计网基础知识, LB algo. 最后留了15 mins 一个coding. 统计一天内网站的同时有多少人在线. 一开始以为这题是实时更新 过去24hour 的统计流量. 面试官说不用那么复杂就考虑 从0点到23:59 这个range 就行.

round 2: 湾区老哥. 20mins 简历. 两个LC. 一个LC 而司令. 另一个类似valid palinrome 但是要考虑各种字符情况.

round 3: HM, 重点简历dive deep 就想看带过多大项目, 这楼主太诚实了没吹牛逼..... 另外问了问 缓存相关基础知识.

1. 一个uneven 的硬币能否作为 0/1 的random generator （1/2 等概率）
2. 同上硬币能不能做1/3 等概率random generator
3. 用rand7() 构建 rand10()

1. 背包问题 一个物品取多次
2. 有多少种购买的方式可以用完所有钱 每一件物品购买的钱都要大于等于上一个物品买的价格

题目是cross Word。给一个0，1 board. 0 可以填单词，1就是block。每次填单词可以从左往右，从上往下填。一个单词的中间不能是其他单词的开头。
input: 0，1 board and List<String> word. 保证所有单词可以fit到board中。

思路：
第一步： 找到所有可能开始的起点
第二步： DFS 填board



# Snapchat

1. xml/html serialization (吐槽一下，这是一道java题，因为要用reflection 来解析object. 但是lz只会c++, 面试官并没有理会我换题的请求...还是让我用c++做, 估计挂在这一轮)
    注意嵌套class. 一个class object 的data member 可以包含另外一个class object.
    注意可能有inifinite loop.
    class A {
    int b;
    C c;
    }
    A a;
    --> <A><int>val</int><C>.....</C></A>

2. LRU cache
3. basic calculator

4. system design
    design a short story view counter:

  count how many users viewed my story video (be aware of the duplication: same user watched twice --> count 1).

  show the most recent 100 user names who just viewed my story video.
  lz答的不好，求问大家有的想法？

5 hm chat

西雅图组的电话面试。面试官也有跟我类似相关的distributed storage的经验，先开始细聊了20分钟简历之后 义乌吧一点点变形，变形的部分就是call那个method他return的是byte array，不需要传入byte array当参数。



先15 分钟 BQ 然后LC1712

design a scalable autocomplete service

LC433

input是一个timestamp的list，里面存的都是时间，不一定是sort了的，还有一个是time window大小
举个例子，timestamp是[101，102，130，139，200]， time window是 5，那time window这个区间可能是[101, 105],[102, 106]...[196,200]
让你找到 能包含最多个timestamp的那个time window，返回这个time window容纳的起始的那个timestamp
比如上面的例子最多的time window是[101,105]中有两个time stamp 101和102

天竺人，很装的样子。前四分钟调mic, 然后聊BQ, 经验，然后做题。
刷题网， 思伞伞.  我说可以用BFS, 天竺人说那call 很多次怎么办，我说加个cache。天竺人说有没有其他办法，扯了一通，然后说那就所有的pair都pre-compute一遍 (和cache没区别。。。)，天竺人说这space complexity高，怎么简化啊，比如两个pair有share的node, 我说union find to generate parent map. 然后天竺人觉得差不多了，才开始让写代码。

写完了，bfs 测过了，没来得及跑union find的case, 天竺人说就这样了，时间到了。然后就挂了。Union find很简单，如果有bug也应该是一些typo.

吐槽： 1. 我也面过别人，没见过不propose optimal solution就不让写代码的。。。
           2. Propose了optimal solution, 但不一下子propose出来，电面也能挂。
                      3. 一般要是设备问题，都会extend相应时间。

毛子面试官 目前楼主面试过感觉是态度最不好的 设备还不太好 break out好几次 最后毛子只好把视频关了
先15 分钟 BQ 然后刷题网 药企幺儿 太新了楼主没刷到过 先说了一下暴力解思路 然后开始improve 想了一会儿想到prefixsum + binary search 解法 开始写 但是其实写的时候感觉分的思路不是那么的清楚 没有一遍bug free写下来 挂了

上周约的店面，上来先介绍然后BQ: 1. challenge project 2. most learned 之后做题，
给很多组interval 问出现频率最大的区间
[[0,3], [0,10],[0,10], [4,5], [4,8], [4,7]] ->我先把 frequency计算一遍 变成[3, 3, 3, 3, 5, 5, 4, 4, 3, 2, 2] 然后去最大的区间 [4,5]

上来先是自我介绍，简单讲讲最近做的project以及自己的role是什么。
题是刷题网而要领，自己写testcase并compile/跑code。楼主当时脑子晕了明明自己的testcase没有cycle看成了有cycle。大家反正面试之前多吃点饭别犯迷糊就行。

Video 面试估计是一个香港人，有些口音听不太懂
前二十分钟主要就是问过去的项目经历，然后追问了一些细节问题

之后的三十分钟左右问了LC 死吧您。
我之前只练过一个没有window限制的找median的类似题 没有写出来最有解。
面试结束之后，自己去看了LC上原题的solution的介绍 都花了很久才看懂。

斯巴灵的二维版本，看到的时候就傻了，只能从brute force开始分析。也请大神指点该怎么做。

复习的时候主要刷lc的tag，感觉没有什么用，直接来个hard中的hard（也可能是我太菜）。看面经的时候看到有二维的最大值版本，还研究了下转换成一维的解法。
好家伙直接来个中位数，感觉不能转成一维来做。所以就想用中位数类似的解法来做，用两个heap来维持，但是感觉写不出来， 时间快没了，就implement brute force。哎。估计多半是挂了。anyway。

设计一个存储新闻的类，实现两个方法，一个添加新闻，一个读取新闻。要求是每次添加在最前端（最新鲜），读取也从最前端读（最新鲜），乍一看有点像栈，但是如果新添加的新闻已经出现在我们的列表里，则要把这个新闻移到尾端。我用了HashMap和double linkedlist实现，这样遇见重复新闻可以O（1）移动到尾端。面试官表示满意，但后来一些scalability的问题没答好，所以挂了。

今天这个面试官不走寻常路，开场就说今天对着屏幕太累，这个面试就不用电脑了，纯聊。。。我还以为我听错了，还confirm一下这轮应该是技术面。。答曰是的。
好吧，电面就是system design, "design a scalable autocomplete service".

因为是纯聊，只能手舞足蹈，各种肢体语言并用了，面试官非常好，每次我解释完后还经常帮着复述一遍确保他正确理解了我提供的solution; 我提供的solution中是在Trie Service 层还有 Api server 负责根据存储在ZK里的partition metadata去routing requests，他主要问了为啥需要这个API server 层而不让Trie Service layer直接接受请求，以及它们的pros and cons；另外主要问了怎么partition/sharding，需要split时如何处理split过程中发来的请求而避免race condition。

感觉聊完他还比较满意，最后提问环节他看到我简历上有从manager做回IC的经历，他刚好也在今年从管理2-30 人左右做回IC, 交流了下这方面的经历和看法，最后准时结束。





设计 油管

电面，题目是力扣溜拾巴。

LC489

LC68

阅后即焚电面，楼主不到一年工作经验，海投，一个月后hr联系，hr面结束后约的电面。先聊了20分钟background
题目是面试官手打的，input是一个timestamp的list，里面存的都是时间，不一定是sort了的，还有一个是time window大小
举个例子，timestamp是[101，102，130，139，200]， time window是 5，那time window这个区间可能是[101, 105],[102, 106]...[196,200]
让你找到 能包含最多个timestamp的那个time window，返回这个time window容纳的起始的那个timestamp
比如上面的例子最多的time window是[101,105]中有两个time stamp 101和102



点面
前端经典EventEmitter

VO1. Behavioral
2. 设计 油管
3. LC 斯钯纠
4. 标准DFS
5. React写一个迷你Github Commit图表 每一天的格子里不同颜色表示activities比率

电面1. read(count) by read4k()

题目很抽象，花了20几分钟才大概理解题意，大意是输入是一组byte array， 前面4byte 是 size 后面是数据， 你要用后面的数据来建树， 继续后面的数据进来你就插入这个树
感觉是read4， build tree， insert tree， 问面试官是binar tree还是怎么，他说可能是multi，我就直接懵逼了，  后来查这个面试官Linkedin 发现是 物理phd 转 ML， 我估计他也不是很熟悉数据结构。

VO
R1
Given two string S and T, determine whether S can be converted into T by one operation, where operation can be adding, deleting, or replacing a character.
​    #abc, ac      => true
​    #abc, acc    => true
​    #abc, bac    => false
​    #abc, bacd    => false

R2 BQ
R3   
     Code questions: In a n x m matrix, we have a set of points and a radius r, which forms a set of circle blocks in the matrix.
    Find whether there is a path from the top left point to the bottom right point without touching any blocks.  Start typing here

R4
URL shortener

R5
system design of story viewer count

LC433

word pattern II

面试的是MTV的天竺大哥。题目是：有一个基因片段的dictionary，如果其中两个基因片段如果有一个位置不同，可以通过一次mutation转化；问题是给定dictionary里的两个任两个片段，能否通过mutation相互转化。
这题没答好。一开始想写一个union find，给三哥解释了思路他也说OK。结果快写完了的时候他质疑union find的复杂度，然后说不应该用union find写，而是用普通的BFS写。然后我只能从头重写了一个BFS的，并且run了一些test case。不过时间特别赶，全程三哥冷脸交流不畅。

一开始聊天，most proud projetc，问为什么对snap感兴趣

word pattern II，几年前刷过，大脑空白，但磕磕绊绊写出来了。
跑了下出了bug，修了一下了下跑过了，
但edge case没有写，问tc，sc脑子空白说错了

LC1755

面试官没开摄像头。面试上来Intro + BQ 共10分钟。开始做题：
蠡口药企无物。

Interviewed with the team manager, he was very knowledgeable and asked good questions in response to things I talked about.

Asked about a security project I have done on the side (not school or work related). Then asked questions about the project

Asked about a project I worked on at work, said I could be abstract bc security is private per company

Arch type question: What security considerations would you make regarding a web forum on a server accessible to the public internet? Answers should include: load balancer, logging and monitoring on the machine hosting the web service, auth, TLS, backend replicas, make considerations for attacks like: xss, csrf and sql injection

Easy coding section, parse strings

第一轮 Coding: 210，拓扑排序，bug free秒了，同时又聊了下多线程的做法可以improve，但没写多线程代码
第二轮 Coding: 380。面试的时候没想出来最好的做法，想了15分钟就只想出一个O(n)的做法，后来面试官看继续耗下去来不及了，就让我写这个做法。这轮感觉很崩。当时没有想到remove可以swap要删除的和最后一个元素，很接近想到了，问面试官hint。给了但是没get到。当时觉得如果要挂的话，肯定是因为这轮。
第三轮 Design：设计Coupon system。背景是比如超级碗这种活动，中场休息派发coupon，所有用户都能领，要求做到非常高的qps，有peak traffic的特性，同时每个用户只能有一个，不能多领。同时还要写点代码，模拟下代码的处理流程，比如，generate一个coupon id，查重，然后保存，失败后怎么处理，用伪代码写一下。这轮感觉也不错，workable solution做完以后还聊了一大堆如何scale application server和db，如何sharding，和解决各种single point of failure的潜在方案。
第四轮 BQ：常规BQ题，为什么离开谷歌，怎么看待谷歌的culture，为什么想来snap，以前在startup的时候作为元老，是怎么build team culture的。一些常规BQ。很多问题我感觉他想挖掘关于leadership的data point，我就尽量提供那方面的故事，比如怎么带intern，怎么带新组员熟悉项目，怎么assign first project。聊得很开心，感觉他很满意。
第五轮 Coding：第一题227，空间复杂度O(n)秒了，写了代码, followup说能不能空间O(1)，卡了几分钟还是想出来了，并写了代码。第二题的背景是网络爬虫，给你一堆网址，网址和网址之间可能有link，可能没有。要你从中选择一些网址作为seed，满足以这些网址为出发点，可以爬到所有给的网站，同时要满足seed的数量是最少的。比如网站A链接到网站B，那网站B就没必要作为seed，因为用A做seed的话也能够最终爬到网站B和网站B衍生出去的所有网址。我觉得这轮应该是very strong hire 吧，毕竟bug free做了2道 hard级别的题（227是medium，如果空间O(1)的要求差不多可以算是hard了吧）。算是弥补了第二轮。

第一轮: bq
第二轮： 设计广告投放系统
第三轮：儿茶搜索鼠各种便利，输出list和iterator
第四轮：儿茶鼠  serialize 和 deserialize

一小时word search + word search 2
跑test case和分析复杂度

1, 带点OOD的算法题，设计google doc的access permission，包括data schema怎么设计，这个题挺有意思的，没有特别复杂的算法。

2，聊经验，还有半小时的时候开始系统设计，每个work (opaque的work)可以在某种手机上运行，有一些constraints： 每种手机只能一次process某一个work, snap scale。这个题目挺长的，理解意思理解了半天，work是抽象概念，snap 100million的人可以有100million的work。说的过程中对方不怎么给feedback。

3，manager behavior瞎聊，那个面试官问如果平时有disagreement怎么处理，我说有disagreement是很常见的，举例子design doc有不同的意见我是怎么做的，然后对方又问，那如果有disagreement怎么办，我脑子里就3个问号了，我刚才不是已经说了吗？

4，算法题，sort string array in linear time，用trie解的。

5,  一道很麻烦的算法题，一个matrix，只能往下走或者往右走，从left upper coner到bottom right corner可以拿到的最大的所有element的product是多少，做过max sum，这个稍微复杂一点，很快想出来了solution，人家说时间还早，不implement，我们搞follow up，从left upper corner到bottom right corner，算有多少个1，如果1的个数是奇数就把所有element的product乘以10，如果是偶数个1就不乘以10，这样在右下角能拿到的最大的结果是多少，recursive的找所有可能的path是不行的，要用DP解。这个题最后想出来了solution，但是implement起来很啰嗦，到最后一轮了脑子已经成浆糊了，写的code就是个mass。

AutoComplete
Input: ['abb', 'abcd', 'bbb'], 'a'
Output:  'ab'
Input: ['abb',  'abcd', 'bbb'], 'abc'
Output:  'abcd'
Input: ['abb',  'abcd', 'bbb'], 'b'
Output:  'bbb'

电面：
15分钟bq+力扣妖散酒简单版，一个单词只能由Dict中的一个或者两个subWord组成。

VO:
1. BQ+Coding。
BQ+我的project问了半小时，最后code没debug完。。
题目很straightforward，实现一个task manager，要求有add(), remove()和getExecuteOrder()三个API，重点是第三个API。input是一些(task, dependent tasks list)的pair。解法类似于Course Schedule，很典型的拓扑排序题。
因为前面聊了太久，我上来就很直接的说用topo sort，小哥表示agree。可能因为自己解释思路比较清楚以及写成的OOD的形式，最后没有debug完小哥也没难为我。
2. BQ+Coding。
题目是力扣伞久寺，two stacks的方法解决。
3. 午餐之后的bq+提问，lz和面试官在同一个公司工作过，所以聊的也很开心。
4. BQ+Coding。
类似于刷题网姚三玲，按围棋的规则，给你一个棋盘（2d array），上面有摆放好的黑白两种棋子，给你其中一个棋子的位置，判断这个棋子是否被包围了。lz用dfs做的，思路应该没问题但边界条件不知道是不是完全正确，这里就不说了。
5. BQ + API/OO Design
lz可能因为YOE不够，没target senior level，所以hr就安排了这种design，是以半coding半OOD的形式进行。
给你一个design好的TreeNode class，每个Node有leftNode, rightNode，数值和操作符四个attribute。Tree本身用来表示一个expression。首先需要实现一个API execute()去计算这个expression，然后聊一下这个class哪里design的不好。
写code的过程中其实会体会到一些TreeNode design的问题，lz在后续聊的时候也和面试官说了，但似乎没答到面试官的点上。欢迎大家踊跃讨论😂

一个很nice的小哥，上来介绍项目，问了fbs推荐ads然后你要predict用户会不会点怎么搞～好general的感觉就随便报了一些ml的model，然后问了我很general的feature engineering一下子把我搞懵了一会儿、、跑回去看了看如何transform各种个样类型的data。。脑子里除了one hot encoding和normalization之外把其他的都忘了。。。他有提feature是age，gender之类的，应该根据每个feature说的～然后半小时做的很基础的一道graph加recursion。就是大概告诉你a/b = 0.1, b/c = 0.2,然后要你output a/c..



力扣 “二而七”，计算一个字符串表达式的结果。如果表达式中出现扩号，如何处理？

电面链接： https://www.1point3acres.com/bbs/thread-716818-1-1.html
面的是Lens Studio C++岗位，五年C++底层经验，除了电面考到了C++ 相关的知识template，universal reference, move semantics之外，VO真的是让人唏嘘啊

1. 乌克兰小哥，manager, 创建Binary tree, 用iterate的方式做tree inorder tranversal。这轮答的不好，我问能不能recursion，他说尝试用iterate的方式，我说用stack，开始写，有点儿卡壳，最后写出来，编译发现是个infinite loop, 然而没有时间了. 有个点就是需要传一个c++ std::function 到这个函数里，做简单的print。还问了C++ vector push_back的时候dynamic allocation (size 不够的话double allocation)。想吐槽的是，五年前iterate tree这个绝对倒背如流，五年工作都是跟OS打交道，没写过一个tree的traversal，真的记不起来了，google一搜就有
2. Behavior一顿聊
3. 英国小哥，senior manager 曾经是seene的创始人，LC 污死。说了思路，但是写的时候一顿卡壳，刷了那么多题把一些基础的给忽略了。跟面试官说，这题我五年前刷过。然而并没有什么用。而且这一轮过来，脑子是蒙的，有一阵子都不知道自己在说啥。大意了啊！
4. 俄罗斯人，一个美国shadow, LRU cache。这题倒背如流。C++说了一个很高深的词汇，我不知道，其实是问C++ template parameter的type validation.我说，c++ 20里有concept可以用，他说concept make it simpler. C++11 平时写的时候肯定用过啊，就是没听过那个词.到现在都记不起来。
5. 美国老哥，问了我的项目，感觉问的非常到位。出了一个dfs的题，一个手机屏幕2维数组，假设里面已经有些颜色涂鸦，然后你随机选一个颜色，点到某个位置capture这个位置里所有的像素，更换成当前颜色。一个dfs recursion很快写完，跑了test case。一遍过。问了如何从底层让他更快。我说不用recusion，省去stack allocation.他说可以。再往底层走呢。我说可以用一些swar technique(纯吹牛逼，我不知道该怎么用swar做)。他说可以。从cache的角度呢？我说，我他马不知道。然后一顿说，编译完这个程序是binary, binary load 到memory，memory通过bus 传到cpu，已经相当他马快了，他说对。 我问能给个提示么，他说如果这个是像素的话，用recursion不好的一点是，比如一个array memory，他总是取当前array的下一个像素更快，如果换一行，再跳回当前这一行，速度就会慢。所以recursion的方法不好。唉，做底层杀毒软件的表示醍醐灌耳。

西雅图组的电话面试。面试官也有跟我类似相关的distributed storage的经验，先开始细聊了20分钟简历之后 义乌吧一点点变形，变形的部分就是call那个method他return的是byte array，不需要传入byte array当参数。



刚刚电面完，一个挺nice的面试官，题目也中规中矩，可惜follow up写的时候有个bug没处理完， share个面经随缘了。。
不是利口原题，但是是一道比较明显的dfs题。 给了从一到二十一共二十个数字，每个数字代表对应的分数，而且每个数字也都能被*2 或者*3后使用。再给定一个target，一个限定值k， 要列出用提供的数字所有能到target且长度不大于k的排列。
举个例子，如果k是3 ，target也是3. 那么就有  [1, 1, 1], [1, 2], [2, 1], [3]等到排列，但是这个3可以直接是数字3, 也可以是1 * 3得到。
再比如180， 就是只能是[60, 60, 60], 每个都是20 * 3
follow up是做去重, [1, 2] , [2, 1]被认为是重复的。

round 1: 统计filesystem disk usage. dfs 解决. follow-up 如何thread safe + scale up
round 2: word search + all permutations
round 3: hm bq
round 4: 非典型 system design.  一开始问有没有感兴趣的技术栈, 楼主回答 最近学了kafka 的design. 以为可以说一波理论, 结果 问如何setup 一个kafka cluster.... 此处只能尴尬的回答记不清command 要看具体文档。
接着
如何setup 一个new service, 如何build,  deploy, testing 如何detect system failure. 如何gather system metrics.  如何做rate limiting/throttling
楼主以为 每个小问题都是build in-house solution, 结果面试官就想知道你了解不了解 existing solution in the market. 感觉不是在考察 distributed system/ system design 核心的concept 而是在考察各种tooling/  framework 会不会用。

round 5: hm bq. 剩余20 mins 来了个有向图最小路径问题。说清楚基本思路，define 好input 之后, 楼主confirm 权重是不是在edge 上, 结果面试官说在vertice上. 之后就input structure 和面试官argue 了一波.  最后还剩不到10 mins 没写完. 估计挂在这一轮.



第一轮， leetcode decode way,  我用的DP
第二轮：给一个 整数数组，在之间插入（ , +, *)使得最终结果是target number。 这题我感觉有点难， 不过也做出来了。
第三轮： 系统设计 multi-attrbiue extraction,  multiple  multi-classification model  VS single sequence tagging model.
第四轮： machine learning deep learning domain knowledge，random rf VS boosting,  lstm, bert, cnn
第五轮： 忘了
第六轮： HM聊简历， 问了个 snapchat 如何给用户推荐， 应该是social  recommendation system 的问题



电面：
1. ML knowledge related to resume project
2. coding: 类似meeting room: given n person's meeting schedule, find all time slots that all these n person could be available (not in any meeting)

昂塞 (强度很大， 六轮， 每轮一小时， 中间只有30分钟休息午餐。。。不知道是否可以要求分开两天面试。整体感觉面试后身体与思想都被掏空了。。。)
1. ML system design: design dashboard for snapchat user activity metrics
2. ML system design: design ads feed pipeline based on user's query
3. BQ (most impactful project, challenge and solution, how to deal with disagreement with other team members)
4. coding: add two numbers (include negative cases)
5. ML knowledge:
1) explain how sequence NN works
2) how to decide embedding size
3) what could we do if data is sparse?
4) what model could we use for panel data?
5) in NN/DNN, how to initialize weights, how to deal with overfitting? What is gradient explode/vanish and how to avoid that?
6. stats probability: we hire some workers to label training data. They can select one from M options as label for each training data record. For each training data record, there will be N workers labeling it. Calculate the probability that there will be a valid label for a training data record. Valid label means there will be one of the M label options that takes the majority among N labels we collected for this record. 先写数学公式推导 （solve it analytically）， 再写代码模拟求解(solve it in an agorithm)。

LC523 x

# Uber

第一题： 输入为一个长度为n的字符串数组words，输出为一个长度为n-1的布尔数组，如果words和words[i+1]的开始和结束字母相同，输出的第i位为真。
第二题： https://www.1point3acres.com/bbs/thread-743363-1-1.html里面的第二题
第三题： https://www.1point3acres.com/bbs/thread-743871-1-1.html，我分了两步，第一步是处理往右推：每一行从右往左处理，如果当前是箱子而且能往右推，就推到最右，然后当前位改成'.'。第二部是处理往下推，和第一步类似。
第四题： https://www.1point3acres.com/bbs/thread-740805-1-1.html 里面的第四题，我的办法是用java里面的位集，减法时，找到第一个是1的位，然后从这一位直到最后一位进行反转。



黑车 VO
1. Bar raiser 有个烙印shadow BQ
2. Coding TikTakToe
3. HM BQ culture
4. LC 伊舅舅 + DP一道题 space 超标，一直跑不过 时间到了就pass了
5. Design 天竺小哥，刚刚promote L5。 问了问google drive design， 稀里糊涂的



利口 艺洱乌思
利口  散散尔
system design mint.com
BQ



1. C(N,K) iterator: next, hasnext
2.  quadtree
3.  most frequent intervals

1. bus stops
2. Twitter search



第一轮 bq 印度经理不知道是不是bar raiser 聊得一般般 问了些奇怪问题
第二轮 力扣 流扒 就正常做不知道为啥印度小哥follow不了 一直在打断问我为什么这样写
第三轮 problem solving 以为也是算法 结果国人大哥考怎么设计一个hashmap 完全没准备只能强行瞎扯了
第四轮 architecture 结果没问系统设计 只做了个过去project deep dive 然后瞎聊了一会儿



// input ("red", "tax", ["tex", "ted","red","tax","tad","den","rex", "teb", "rad"])

// output:
//[ [ "red", "ted", "tex", "tax" ], --stop at tax
// [ "red", "ted", "tad", "tax" ],  --stop at tax
// [ "red", "rex", "tex", "tax" ] ]  --stop at tax
// red: red rad tad
// tax: tax tex

刚刚完成一个店面，东欧小哥，花了20分钟才明白这个问题，我用的DFS, 大体思想写出来，但是没做完， 时间复杂度比较高，小哥建议用BFS,  估计挂了。
不知道蠡口有没有类似的问题。





利口 药二铃铃

出乎意料的简单，本来recruiter给的准备材料上说是会有LeetCode风格的题两道，可能会是medium - hard级别。
结果小哥只出了一题。
先给了一个简单暴力的两重循环解法，小哥说我们先实现再来优化。然后改为排序再对比。
然后小哥说做太快了还有很多时间，我们慢慢来优化吧。于是问了问这个如何能用多线程的方式来优化。。。。这部分嘴炮就好，不用写出实现。于是大致上伪代码写了一下实现。
最后就是提问题时间随便扯了扯。



第一轮 蠡口爱丽丝萝卜的那个抢石头，minmax后面加dp优化
第二轮 实现一个简单的电题，用户可以在任何楼层请求向上走还是向下走，实现电梯的响应逻辑，既向上的时候一路响应向上得请求，反之亦然。用了两个treeset做的，有些corner case比较有意思
第三轮 bar raiser，各种bq
第四轮 设计一个在线battleship 1v1对战（你说成下围棋也可以）。要求千万用户，实时匹配，实时显示对战状态，对战可以暂停继续等。游戏的细节比如数据模型也要求设计。



店面: 三姐 跟邀請信上說的人不同 先花了大概20~25分鐘討論我的背景及目前在做的project 接下來出題 一度以為是系統設計面試 lol

coding題目:
傳訊息 有限制每一封訊息的字元數 類似wrap words with maximum length

給一串 string 和 限制的長度, 把訊息分批傳出

ex. string = "abcde abc ab cc", maximum = 10
   ===> "abcde abc"
             "ab cc"

follow up 是要加上 訊息數量的資訊 (m/n)
m: 目前訊息所在編號
n: 總共訊息的數量
ex: string = "abcde abc ab cc", maximum = 15
     ===> "abcde abc (1/2)"
               "ab cc (2/2)"

要注意 (m/n)也算在訊息的字元總數, 詢問面試官有沒有限制訊息的數量, 得到的答案是最多9封, 訊息數量資訊的長度是固定的 都是6個字元(含空格)

寫完後自己跑了幾個test case 都沒有問題

店面完寫信follow up都沒消息 大約10天後收到罐頭拒信 猜想可能應該要寫出兩題吧 move on



1. bar raiser。 都是behave2. 一个dfs 搜索，类似course scheduler但是比它复杂，具体记不清了。 需要compile且面试官会提供testcase
3. 一个矩阵全都是0和1，求把一个0翻转成1之后联通的1的个数。 比如
0 0 1
0 0 0
0 0 1,

此时联通的1的个数为2. 如果翻转[0][1], 此时变成
0 0 1
0 0 1
0 0 1
此时联通的1的个数为1.
func(board [][]int, x int, y int) int {
}
followup且这个函数会被call很多次. 并查集。 需要compile且面试官会提供testcase

4. dive deep. 面试官是做hadoop的，问的很深
5. 设计robinhood watchlist。 follow up kafka 至多一次 vs 至少一次 vs 恰好一次



1. hiring manager， 问了简历，项目，写了一道题。简化版围棋问题， 围棋的棋盘， 有黑子白子已经摆在棋盘上了，如果给一个棋子的位置， x, y, 判断当前这个棋子能不能被remove掉。
2. 非常神奇的一轮，老哥的问题是想找到一种解决方式，直到什么单词在17世纪使用，但是18世纪不使用了。 老哥说让我share桌面，因为想考察我怎么思考和搜索来解决一个问题，并且最终要写出来代码，给一个working solution。我非常懵逼这一轮，不是很明白他想考察什么，到底想做甚，然后我提出一些想法老哥就跟我抬杠。
3. bar raiser。 BQ
4. 利口 咦额嗣舅 + 利口 散凌药
5. 系统设计，设计一个youtube video view count的系统，

# Two Sigma

第一题利口吴思琪，第二题利口要领斯巴

就是地里面经原题。。。leetcode上twosigma tag frequency最高的两道题稍微有点变种
第一题：friends circle，dfs/bfs秒过
第二题： longest string chain 先sort再dp也秒过

朋友圈，利口舞斯霸

最长 String 链条， 利口 亿灵斯霸

标准包1. friend circle，蠡口斯雾气， 2. longest chain 参考：https://www.cnblogs.com/EdwardLiu/p/6177843.html

Friend Circle， 非常常见，利口舞斯霸

longtest String Chain， 利口 亿灵斯霸

 NYU temperature，关于Linear Regression的一系列小问，都是基本的求cov这些，学过基本的LR即可

从很多的feature里选5个features that best fit y,可以直接用sklearn里的包，

https://leetcode.com/discuss/interview-question/362324/two-sigma-oa-2019-swe

missing words直接1个pointer在t里走一遍s，不在t里的就加进list

substring - 用suffix array做否则其他解法全部time out
lz看到网上有人写过的suffix array解法但是实在不想花时间搞懂就直接交了n^2的解爱咋咋地吧。。

1048 547

# Linkedin

第一轮技术电面： 1小时，两个面试官，先互相介绍，然后两道题，尔斯思 （follow up是，如果一个单词很长怎么办，我答得是用Binary search，面试官点头同意）， 依舞灵。 电面结束两小时后通知VO。

虚拟昂赛：我约到了电面后两周左右，因为中间有其他面试。 早上9：45左右开始到下午4：15, 真心挺累的。

第一轮： 1小时  和Hiring manager聊experience，各种问技术细节，详细walk through了一个大的做过的项目，强烈大家准备个pad / 在browser 的一个用的顺手的画图APP。 我用的是ipad上用Jamboard (by Google), 免费的，特别好用，可以随时share给面试官，唯一的问题是，它不会自动翻页。如果你去到下一页，记得提醒下面试官。 有工具画图，就很好讲project，清晰明了。

第二轮： 算法： 1小时，互相介绍花了蛮久，小哥很热情的介绍他做的东西，问了我很多我做的东西的问题，然后题目感觉是自己出的，判断一个string是不是有某种特性，细节记不清了，但是非常straightforward，用hashmap解决，现场想完全来得及。 follow up问了数据量很大怎么办，我就往多个host， MapReduce上面扯。 小哥很满意，算是蒙混过关。。。

午饭轮：30 min  本来是有另一个经理对我也感兴趣，但是她忘了来参加meeting。。 后来和HR说了下，HR说这轮不是必须的，就没关系。
break: 30 min

下午第一轮： 1小时  technical communication 组里的一个人， 让我讲一个project，非常详细讲，他会问问题。 同样用Jamboard。
第二轮： 1小时  算法  两个面试官  find all palindrome subsequences in a given string. 应该用DFS / backtracking解的。 我面完过了一天才想起来。。当时就一直纠结用string的方法来解，不太work，最后code写的也不太对。。当时就觉得凉了，拉倒，面了个寂寞。
第三轮： 系统设计。 1小时15分钟，主面试官是这个组tech lead， shadow是个工作一年多的人。 考了shorten URL。 我就按照educative.io的grokking the system design interview的思路来讲。 BTW这个课强推，入门超级好。 但是它讲的比较浅，有些东西它说怎么处理, 但是没说为什么。比如怎么加load balancer那块儿。。 然后我就按照那个说了一句，马上就给自己挖了个坑，面试官非常不容易，让我defend自己，然而我讲不出来。。然后他就一顿说他的想法，我只能说有道理有道理。。 所以有一段觉得有点凉了，前面大半部分感觉面的还可以。



第一题蠡口 伞流起。 秒了
第二题是面经中看过的 RetainBestCache 题目 (https://www.1point3acres.com/bbs ... ngineer-484962.html)。。但楼主看到的几个面经都是staff才面，楼主面的senior，就犯懒了没准备，看到题目后就后悔了。
上来先说brute force，也就是O(N）的方法。
接下来我直觉觉得这道题目可以和LRU, LFU一样用DLL和HashMap达到O(1)，就一直在钻牛角尖。中间面试官提示了一些，潜台词是考虑heap，但楼主也没反应过来。。最后还剩十分种面试官说那把O(N)实现一下，顺利实现完。楼主提问题说这个可以在constant time实现吗。面试官回答不能，楼主反应过来那肯定是O(logN) 也就是用heap/ 红黑树。最后2分钟快速说了思路面试官表示正确。但没有给过。。



1) HM。没啥好说的，纯聊做过的ML项目
2) Lunch。尬问尬聊
3) Data Coding。

给一个function，这个function描述的是一凸的数学函数，对于一个x值，返回对应的y值。然后再给L, R值，求这个数学函数在[L, R]内的最小值。不让用gradient。地理之前有个帖子说是二分法，我就往这方面想了，但其实和二分有挺大区别。面试官给了点hint。应该是把[L, R]平均分成三个区间，最小值可能有三种情况，分别对应落在这三个区间内。然后不管是哪种情况，因为函数是凸的，都可以排除掉至少一个区间，只需要在剩下的区间内进行下一步搜索。大家自己画个图分类讨论下就一目了然了。

有N个点在一条线上，求一个meeting point，离这N个点的距离之和最小。其实就是求中位数，但是得先数学证明一下答案是中位数。

4) Coding。刷题网 留霸
5) Data Mining。挑一个最擅长的模型，然后开始问问题。我挑的神经网络，然后就那些八股文问题，loss, regularization, 和logisic regression区别，etc... 就都还挺常规的。可以去看看地理别的面经
6) ML Deisgn。设计一个类似于google news的新闻推荐系统

电面是个印度姐姐和一个shadow大哥，印度姐姐看起来毕业没很久，是新手，但面试节奏挺好的。lesson learned：要是发现对方刚入职没多久是个面试新手的话，1.很可能有shadow 2.面试题很规整 3.不会在project挖太深

project：
几乎没问

coding：
一道热门题 - 其他面经里出现过，但好像不是lc原题

thread vs process multithread vs multiprocess
stack memory, heap
C++, Java memory allocation 發生在compile or runtime
前面还行，后面memory相关东西答得非常不确定

之后是哩扣 榴是把 简化版
不要求空格平均分配直接加在尾巴就好



Infra 组的电面，三哥面试官。一开头是先几个基础 BQ， 比如你最近做什么项目啊，学到什么啊。然后问了几个基础知识题，比如 thread vs. process 还有 db 的 transcation 是怎么支持的。然后开始做题了。利口其林刘, 快速写出来了，然后问了几个 follow 比如怎么支持多线程.... 一开始想用 synchronized 关键字，但是 performance 肯定不行，后来在面试官提醒下，用了 reentrantLock， 可能这边会挂。 (三哥面试官一直说 you did perfect.... 感觉会不会是笑面虎...)

word distance2. 问了如果要call很多次 怎么优化. 刚开始卡在这 后来提示可以用空间换时间 才答出来
感谢人美心善国人小姐姐提示
还有一个是数组里求subarray的最大sum.

下午刚面，两题非常常见，第一题判断是不是perfect square root
第二天是retain best cache
面试官是中国人小哥和美国人小哥，人都特别好。



第一轮HM聊天。问了很多BQ 感觉着重在考查我带队的能力。比如如何规划新项目的时间人力物力资源等等

第二轮coding 第一题是写一个nested iterator。感觉是merge k的变种。给了一个List of iterator需要merge返回一个单一iterator。刚开始没get到。后来才明白需要自己实现Interface一下。follow up是如果给的iterate是一个api call的stream。那怎么实现throttle的功能。感觉是往topk的系统设计上引了。。我给了partition和count-min sketch 两种方案。。第二题 尔硫雾。follow up 如果是环array呢？

第三轮coding 设计一个buffer池的类。能够allocate, get, put buffer。刚开始是固定size的allocate。follow up是如果size不固定呢。。大概想法是一个类似2D array的buffer。比如1024 * 1024 那么第一个block就可以用来存metadata。size不固定的部分没有让写代码。而是广泛的讨论了各种实现可能和细节。比如allocate的data的最后4个byte可以作为下一个subblock指针。还讨论了类似内存管理回收的实现方法。

第四轮 聊过往经验 按下不表先。。

第五轮 系统设计。设计一个health monitoring system。我承认我系统设计是菜鸡。说实话 全程懵逼。面试官挺好的。问的问题都比较有指向性也很随和。。

重头戏第四轮。说实话我就是为了吐槽这轮来发这个面经的。。面试官个人感觉很奇葩。带着非常强烈的个人主观来听我的个人经历。刚开始直接说项目。没2分钟抱怨我没先跟她说架构。那我说好吧我来解释架构。说架构没2分钟又抱怨我说的太广。让我具体到项目细节。。。。开场没5分钟我就黑线了。。。然后在后面的过程中各种随意打断我。也没有让我很好的表述完我想说的项目细节就开始各种质问。你为什么不这样不那样。你这个不合理那个不合理。我这个很confuse那个很confuse。。。我就想说了。你连安安静静听人把话说完都做不到 那么除了confusion what else are you expecting to get？是不是所有公司设计架构跟你们LinkedIn或者跟你的经验不同的就都是垃圾就都是错的？更奇葩的是面试官经验不到2年。副面试官才毕业8个月。。然后来面senior的职位。。LinkedIn搞啥？
总结。连基本的尊重都做不到。是不是有点丢公司牌面？



第一题，很简单的算法题，大概 5-6 行就可以了。然后问我用什么语言，我说go，小哥说，哦，这个我不会啊。然后就感觉气氛有点不对了。
第二题，说有一个已知API， 输入id，可以返回这个manager 下一层的所有员工信息，给你一个id，打印出他下面所有的子 manager，一直到最后普通员工。我说，这个call API 用go，我不太熟，可以google 吗？然后小哥就帮我直接google。
第三题，用script统计一个log文件，按时间排序，打印那个分钟的log个数，如果那个时候有log的话。follow up是log 里面带有程序名字的，然后统计打印的时候把程序也带上，follow up up是，如果这个log 是在不停增加的，怎么办？因为我script也不会用，然后小哥就不停帮我google，发我链接。到这时候我其实就已经不知道自己在做什么了。。。



Coding 1.1 permute 1.2 伊奇就领
Coding 2.1 深度优先搜索题忘了很简单，2.2 也是简单题
Project Deep Dive
设计领硬的feed李斯特
经理BQ



LinkedIn Onsite, 一共四轮，具体顺序有点忘了1. Android Coding: 做一个App的onboarding 界面，从一个json file里面读取一系列问题，然后需要在MainActivity里面一个个显示出来。那个project是Java的语言，不能refer你之前自己写的Code。
2. Manager: 聊你proud project, 会针对project 问一些问题，比方说让你重做一边，你决定那些地方可以improve, 问了下 LinkedIn的 job search 界面，有哪些你觉得可以改进的.
3. Coding: 利口 儿起耳, 另外一个是跟island类似的题，按照island的大小返回一个list.
4. system design: 设计LinkedIn Home Page, 包括comments.



电面： 衣灵寺 + 简单two pointer 具体题目不记得了

1. Design: 给你一个is malicious ip的api,  design a service to catch malicious ip
2. 类似 力扣 伞芭灵
3. 力扣 伞寺 + 耳伞陆
4. Hiring Manager 聊天



第一轮： host manager， 问了很多项目问题，BQ问题，以及基础知识, 比如mongodb，db indexing, restful api, state ...
第二轮coding：一个国人和一个三姐，国人很好，考了给一个node个数和edges数组，求是否为valid，答得很快，followup了如果有多个parents怎么修改代码。还有很多时间，就问了一些Java基础知识
第三轮coding：两位面试官，题目为fall tree一层层求leaves，秒了，followup为如果不是binary tree怎么改代码，然后又说有多个parents怎么修改代码，怎么避免重复
第四轮 lunch break；面试官介绍LinkedIn，给时间问问题

以上几轮均是无缝衔接，没有时间休息

然后休息了30小时，用于快速吃饭

然后下一轮tech communication，假设面试官是新招的人，你如何help them onboard fast, 介绍项目已经要做的事情，画图项目的框架和构思啥的，然后又讲了另外一个大项目的整体框架，毕竟自己带的项目都讲得还可以，感觉面试官也挺满意的。
最后一轮系统设计，有点无厘头，以为是设计一个系统，却不然，问了怎么authenticate microservice的call，刚准备介绍，没想到面试官就开始准备一个一个问题的问，照着自己准备的问的，总共7-8个，比如怎么打包自己code成lib，让其他组使用？一脸问号？？Kafka，offline log process，db，pull vs push。。。都尽力答了。

面试结果：说其他轮都非常strong，SD不行，卒。



国人和印度人两个一起面的，感觉好像都不是junior，有一个人shadow，不知道他们家的面试是不是都组队。

题目说实话不难，但是我发挥的一塌糊涂估计是要挂，感觉国人已经很善待我了但是没接住。。

第一题我不知道有没有原题，就是两个人玩游戏，从一堆数里轮流取数字，当总和到k的时候那个人就胜利了。写的时候脑子不清醒结束条件写反了然后被提醒了才改过来。
第二题是一个类似于LRU cache的题，很长的代码，给了几个接口让你取数据判断它的rank的。但是和lru不同的是他只在乎rank最低的所以不用去存linklist。很久没写java了感觉写的有点手生，估计很多library写错了。。不过面试官有说这个无所谓。



电面
先问了一些virtual memory有关的知识。coding是网站364.

onsite说有7轮，要分2天面，2轮coding，设计有3轮，1是系统设计，2是data structure设计，3是多线程。1轮behavior，1轮culture。
第一天第1轮coding，是个奇葩三哥。又问了一遍跟virtual memory有关的东西。然后基本上我说话的时候他必会打断我，只要说的跟他想的不是完全一样他必要打断让我重说。coding题是每一个用户名对应了几个邮箱，不同的用户名对应的邮箱里可能有相同的，把所有有相同邮箱的用户名merge到一起。讲了一些思路，期间不停打断。他让coding的时候input又变了，变成给n个用户名，和list of edges表示两个用户名之间有共同邮箱，输出用户名merge之后group的个数。写完之后他说想些test case，我想了一个之后他说你的code能handle这种情况吗？我看了一下之后说能啊。他说are you sure？我又想了一下之后说对啊，还解释了一下。他说ok, I want you to be confident。我当时都笑了。我面过这么多公司加上我自己做interviewer受到培训和面别人，这是我唯一一次遇到人test case的时候问are you sure？
第二轮应该是午饭轮和culture，interviewer no show
第三轮data structure设计，一个key value store，我说用sstable，但是interviewer说每个value可能有4G大，file system只能append。设计put, get, delete三种方法。需要详细讲清楚这三种方法的执行流程。然后问background compaction怎么work。又问了index怎么维护。在compaction的时候index怎么更新。

另一天，第4轮网站373，把加换成了乘。
第5轮Hiring manager。最大影响力的项目，其中的technical challenge。后面又问了设计一个release pipeline，2周发布一次release。有哪些元素。如果有一个hot fix来不及等到下一次release，但是depend了很多个commit怎么cherrypick怎么发布。
第6轮设计heavy hitters. Top N for 5 minutes, 1 hour, 1 day.

第7轮多线程。我事先问recruiter这语言有要求吗，recruiter说没关系interview是language agnostic，我去看了看python的多线程类，然后面试的时候interviewer说只能用Java或者C++。这个很少看到有人考，应该是这个组的特色。有一个水类H2O，有一个Hydrogen方法和一个oxygen方法。Hydrogen方法需要block，直到有一个oxygen方法被调用。oxygen方法也要block，直到Hydrogen方法被调用了2次（有2个thread都在调用Hydrogen）。他最后给的提示Hydrogen方法和oxygen方法都需要wait，当某个thread发现满足条件的时候就notifyAll，然后2个H和1个O都醒来再去check条件。



电面1： 刘领悟，义务灵电面2:   纯BQ

现场表演：
1 ： OOD： 类似于LRU
2 ： OOD： 自己写一个deserialize JSON 各种类型数据的接口，工作都直接拿来用，从来没想过里面怎么回事，自己的锅。。。
3 :  吃饭聊天轮，哎。。。真心羡慕一下，WLB好得不得了
4 :  全程最不愉快的一轮，烙印刚聊几句就强烈的鄙视我做的多么基础，多么没见过世面，一副及其傲慢的态度，没屏幕挡着下巴都要撅出去了，然后让我设计devops 怎么code review，怎么deploy。。。
5 ：HM，是我很喜欢的老板风格，有机会也很愿意跟他做事。全程他都挺和蔼的聊天，我顺便“轻描淡写地”参了4一本，反正没戏了，想着只是阐述一下事实，不要让这样的人留着再祸害以后去面试的国人
6 ：全程BQ，聊了互相做过的东西，他介绍了一个自己在inday 做的东西还挺有意思的。



1.hiring manager BQ, 聊了聊过往的项目，最后问了身份问题

2. system design: design rate limitter
3. 吃饭轮，闲聊
4. 三哥，
Insert Delete GetRandom,
followup Duplicates allowed,
最后剩十四分钟居然又来一道 Factor Combinations, 写的比较匆忙, base case 那个return 里面 virable 写错了
    因该是
      List<Integer> p = new ArrayList<>(path);
      p.add(a)
      res.add(p);
面完后发现我写的
      List<Integer> p = new ArrayList<>(path);
      path.add(a)
      res.add(path);
估计凉了
5. 国人小哥， resursion 题 given a set of numbers, find subset equal to given target, followup, what is given set contains negative.
5. Technical Communication 就随便介绍了一下最近做的项目，具体也不知道要求是啥



新鲜的店面，两道题，一开始聊聊简历，
第一题 kth largest element
第二题， best retain cache, 我用的priority queue做的



面的infra track，一个主面和一个shadow，自我介绍和项目花了10分钟左右，然后几个基础题，process和thread区别、virtual memory、heap和stack区别；接着两道利口题。散流器和欺凌刘 第一题让写二分法，好久没写过卡住了，提示了才做完的；第二题只剩二十分钟，慌张写的，也被提示不少。



分别有两个组的recruiter联系就一起面了，一个是Data Integration偏向infra的岗位，另一个是marketplace偏向产品的岗位。Data:
简单问了Java finally final finalize, mutex vs semaphore 还有 binary semaphore
retain best cache by rank (https://www.1point3acres.com/bbs ... ngineer-484962.html)
folllow up1: 如何保证thread safe, 加锁了之后也讨论了如何提高性能，感觉答的不好。
follow up2: rank 会改变，使用越多rank越高，给了类似LFU的解法，来不及写代码了。

Marketplace:
简单问了简历的问题
利口244
利口215 面试官不喜欢quickselect的解法，因为时间复杂度不稳定，最后还是用heap做了，分析时间复杂度。



职缺是SDE2 (他们家的senior), 一个主面和一个shadow，都是国人小姊姊, 自我介绍5分钟左右开始
题目都刷题网原题, 溜午与洱散, follow up 没答好



1. 随便聊了一台机器的文件系统如何实现大规模搜索
2. permutation 尔 和 散死
3. 行为问题
4. 工程师午饭，挺好的国人大哥
5. 气流 和 要留领
6. 烙印，系统设计，metric系统，各种说听不懂，各种坑，应该会跪在这一轮
7. delay request



第一题： int转二进制
第二题： 面经里的RetainBestCache那道题



电面背靠背两轮，一轮BQ聊天，一轮coding，具体啥题有点忘了，是和concurrency有关的，反正最后用semaphore写了不到十行代码，以为挂了，没想到差不多一个月后通知说过了，要昂赛。

昂赛总共7轮，分两天，其中一轮是半小时，QA，其实就是以前的吃饭轮，只是不用吃饭了，其他轮都是一个小时或者75分钟。
coding：二叉树序列化和反序列化+best retain cache
一轮：设计一个KV store，包含文件存储格式啥的
一轮：常见的那个有很多doc，要实现query: a and b, not c
一轮：设计producer-consummer 的一个啥东西来着，大概就是producer produce大小各异的文件，然后consumer去消费，怎么去定义彼此间protocol之类的。
其他两轮BQ就不说了。



店面是nested integer两题 有shadow 秒了
一月份的时候昂赛：
代码轮1）decode encode二叉树，一开始用层序遍历,面试官说,好我知道你的意思了，但你这个要用另外的space complexity, 如果不用层序遍历怎么搞，我说试试inorder+preorder?好像也不是他要的他一直说我用了space反正最后没明白他到底什么意思，肯定挂了
代码2）问了一题怎么写开根号，呵呵，我不会，我也不太明白面试问这种问题是想干嘛。但我还是照想到的思路写了，但后来面试官说有float怎么办，嗯… 我就也挂了
其实楼主刷了很久题，但从来不看数学题，感觉问了也没什么意义因为，还是怪自己，面试官其实挺nice的这一轮。
系统设计3） 问建一个calendar system, like outlook. 没看过这方面的临时解答了，平时工作有做sys design所以还好，但硬度姐姐最后问我你不觉得你这个系统少了点什么吗？ 我说我们再加点新feature? 后来她说我没画front end component...呵呵，绝了，我从没试过设计backend 系统让我画个front end component的。
4）behaviour就是正常题



发个找工作网昂赛面经
1. HM 烙印女, 全程冷脸BQ
2. 系统设计, top k
3. coding. 1. bst LCA 和普通二叉树LCA, 2. 标准permutation
4. bar raiser. bq
5. coding. 两个linkedlist是否intersect. follow up: 有环怎么办



接下来做两个题：利口 伞伞久， 利口 伞溜似。 第二个题目要求不能用多余的空间



1. 解釋 event bubbling, web accessibility
2. 常見的給一段prototype代碼說結果
3. data 的format 是
'page1/uri' : [{title: 'title1', post:'post1'}, {title: 'title2', post:'post2'}, ... {title:'title3', post:'post3'}]
'page2/uri' : [{title: 'title1', post:'post1'}, {title: 'title2', post:'post2'}, ... {title:'title3', post:'post3'}]
...
寫一個類似newsfeed的功能 scroll到銀幕底部的時候要向server要資料



Coding：
1. 利口 药灵药
2. 利口 药无灵 注意 处理 exceptions，testcase

BQ：
1. most impact project
2. e.g. of mentor others
3. how to persuade others if conflict happens
4. e.g. of influence team or others
5. what's the strength
6. How to compensate your left from the meeting.
7. some questions above has some follow up.



经理聊天
coding 已知一堆词 输入一些字母 找到可以被这些字母组成的词(只需使用给定字母的子集 不能重复使用同一个字母 但给定的字母中可能有重复 比如给你两个a)
另一个人问了一些behavior问题
设计calendar system
蠡口四散而

第一题是 🍐叩的奇异流，不过要求 performance 好，这种解法在 solution 里有，用 TreeMap。第二轮是 host manager
第三轮是 lunch，纯聊天，被领克的樱家的福利秀了一脸

第4 轮感觉是面试官自己想的题，我刷的题少，不知道有这题么：给一个二维n*n矩阵，1 代表敌人，0代表非敌人（不需要干掉）。如果攻击敌人时，另外一个敌人在其上下左右位置，则可以继续攻击。当在此次攻击中没有连在一起的敌人时，则另找下一个敌人开始攻击。 目标是干掉所有的敌人，并最后返回：攻击开始的坐标 list，而且解决掉的敌人数多的坐标放在前面。
Btw: 只有上下左右 4 个方向连在一起才能算 connected。

Example 1:
input:
grid = [[1, 1, 1],
        [1, 0, 0],
        [1, 0, 1]]
output: [[0,0], [2,2]]
解释: 第一个是[0,0], 是因为从这个点开始攻击，解决掉的敌人最多，而[2,2]在后是因为从它开始只能解决1个敌人。同时，第一个如果是[0, 1]或者[0,2 ]或者[1,0 ]或者[2,0 ], 也都可以，因为那 5 个敌人都是连在一起的，从任何一个开始都行。

Example 2:
input:
grid = [[1, 0, 1],
        [0, 1, 0],
        [1, 0, 1]]
output: [[0,0],[0, 2], [1,1], [2,0] [2,2]]
解释: 每个攻击开始点都只能最多攻击1 个敌人。

思路：union find + DFS。初始化 union find, 每个坐标即是里面的 node, 通过 DFS traverse 整个 grid，把所有连在一起的value 为1的坐标 都 union 到一起，然后记录parent size，最后按 size 来返回parent 即可

第 5 轮 technical communication，聊项目
第 6 轮 system design：top k searched term in last 24 hours. 要求：这个结果应该是准确到分钟，即每分钟都有更新。基本上 这个视频都能解决：https://www.youtube.com/watch?v=kx-XDoPjoHw
Follow up 的问题有：
一个host down 了怎么办？答：用 replica
host down 了，换了新的 host，怎么让新的host 恢复之前那个 host 的状态？答：让 master host 把之前那个 host 的 meta data replicate 给新来的 host
给定任意时间范围，如何返回这个时间范围内的top k searched term。这道题没答好，其实上面视频就有解答

Feedback 说 system design 没答好，我觉得应该是最后这里出了问题。



第一题 整数转化为二进制字符串 写了数学计算的法 讨论了bit manipulation第二题 merge两个排列好的数组 代码实现 followup讨论merge n个排列好的数组方法和time complexity



问的是一个设计的题目，写cache。

只有get方法，没有set/put。
会给一个capacity，给一个datastore function的API，就是后台拉数据。然后给一个根据value返回权重值的API，要根据value，注意是value不是key，根据value的权重值来决定evict cache的先后顺序。

有一点triky 的地方是，根据value，然后就是如果满了，最好是先把目前get的放进去，然后再evict，因为有可能目前要放的，value的权重值最低，其实就是不用放了。也可以先做判断再决定evict还是放当前的key value。

之后问了LRU，LFU等的实现，如何实现，就是口头讲了。

因为给的都是虚拟的API，没有真的让run，不过这题基本上代码还是简单的，没太必要真的run。



电面：LC 刘领悟，刘奇艺
Onsite:
第一轮：host manager, 问了比较多我目前组里的dev cycle是什么样的；让我说一下工作中我最proud的一个accomplishment，期间会问些他们感兴趣的问题；问假如很多customer抱怨Linkedin payment用不了了，我如何解决这个问题，分别会先后采取哪些措施
第二轮：technical communication，假如他们对我们做的东西一无所知，让我随便挑一个project介绍，期间会问一些具体技术细节。这轮只要对自己做过的东西比较熟悉就没啥问题了
第三轮：coding1，LC 柳依依 变体，以及 伞肆意
第四轮：coding2，LC 易思久，另外一个真的想不起来了。。但也是LC linkedin 6-month tag下的题
第五轮：系统设计，assuming you have a library to store lots of books, design a system to support two queries: "and" to return the collection of book ids which contain word1 and word2; "not" to return the book ids which don't contain a specific word



邮件说是一个印度小哥和国人小哥面我。结果只来了印度小哥。希望小哥能给我一个好的评价。
第一题：刷题网 要零四 非常常规的找树最大深度。
第二题：刷题网 雾散 还是非常常规的找最大连续序列和
前两题半小时内做完了就给了第三题。说第三题是个extension。刷题网 药物而 还是非常非常常规的找最大连续序列乘积。但是，原题以及那么常规的题我居然没秒出来。小哥说“almost there”。跑test的时候才发现有问题，有点沮丧。现在很担心会不会影响我的评分。



电面一小时3道题
1-刘启巴 + 贰拾
2-雾散
3-义务而

VO 5轮
1. host manager 常见bq + 一起讨论如何解决面试组的现有issue
2. system design tiny url 常见问题 简单讨论eventually consistency， cache， regional data center
3. code: max tree + followup 用treemap的解法 没写code + 第二问是一道比较open的code讨论题 没有具体答案
4. tech communication： project dive deep
5. code: 第一问忘了 第二问是 - 蠡口气流



先自我介绍，问了工作中的technical challenge和如何解决。然后问问题，问了process vs thread，write-thru cache vs write-back cache，java如何handle exception。
然后开始做题，第一题是在无向图里找连通的区域，刷题网伞尔伞。
第二题是二叉树的序列化和非序列化，刷题网尔玖柒，这题之前没做过，不过在小哥的提示下还是写出来了。
面的时候execute被disable了，代码都没有跑，写完了之后小哥让我口述一下代码是怎么运行的。



来爆一个领英不在蠡口里面的题来求接下来的面试顺利吧

第一题蠡口贰亿物
第二题没在蠡口见过 在网上找到了一个类似的 地里也有爆过 但不常见 rankable cache class 弄懂题意都花了很久没做完。。
https://www.cnblogs.com/apanda009/p/7945036.html



第一次爆 领英电面
问了下问题，process vs thread
coding一题 Nested List Weight Sum II 蠡口散刘思



1.找一个树的最大深度 （要动撕）
2.给一个数字，求所有的factors组合，问了优化和时间空间复杂度（而⑤撕）



刚刚刚刚放下电话，猎头小姐姐很负责任地专程打电话把我拒了（很快，周一面的，今天拒）

App Track
1. HM talk: HM说自己闹肚子，所以这轮放鸽子了。。lol
2. coding2:说是专注于problen solving，但其实就是一个算法题啊我觉得。。刷题刷的少，没见过这题：一个链表，有上下左右4个指针，要求flatten之。我说BFS/DFS被天竺面试官否了，要求必须space O(1)<no queue or stack>，还特地说不许递归。然后也想出来了一个节点的处理方法，但是我想不明白不递归怎么弄。最后他说：哎呀你得递归啊。。。我就知道，卒了（面试结束天竺面试官还说"you did a great job, hope to see you soon!"，真tm阴）
3. coding1: 文字排版题，没啥说的，面试官美国棒子，还行，没难为我
4. system desgin：topk，两个人一起面我，一个国人大哥，看得出来想帮我，但另一个天竺大哥，一路穷追猛问。。（有时候他俩会争执一下到底是在问啥）效果可想而知
5. tech communication：我别的不行，嘴盾特别nb，秒之（feedback说我这轮把面试官impress得下巴都掉了）
6. HM talk：他们后来又随便找了个manager，跟我尬聊了一小时。老毛子，无感。



# Confluent

设计: 单机键值存储，主要focus是single node内部具体kv的实现细节，需要支持持久化

设计：短链接

扣定：函数注册查找，题目描述比较长，见附件，followup是能match 0 到多个同一参数

扣定：延迟任务安排， 基本上就是实现一个简单的ScheduledExecutorService。 主要考察concurrency,  monitor pattern, lock, cv

HM：聊天，常规的BQ：为什么跳槽，challenge project，conflict resolution，最大failure



初面 还是那道Wildcard，我没有用dp，也没有用双指针。可能是面试小哥放水吧，就是很简单的 split('*') 后处理就可以，需求比较简单，解答也就简单了。我一直都觉得大家要聊得开心，他好像也满意就也过了。
第二轮约了5场，第一场BQ，和老板聊天，之前有根据14原则练习过。我觉得聊得还可以。

第二场聊前端的开发，做一个RSS Feed一样的表格，第一个column是Feed列表，点了之后第二个column显示文章列表，点了之后第三个column显示具体的文章。API设计也要做，headers要写全。我写的伪代码大概讲讲框架。实际上，这个不是表格，是drawer。但他要表格，那我就真的给了table tag，th，tr之类的给他。后面还要聊webpack，AMD和CommonJS，测试框架之类的。中间休息一小时。

第三场写windowed kvp，LRU变种，超过30分钟后的key要删掉，我是每次get的时候去删除过期的，等于get是O(N) 了。然后要求计算平均值，平均值是计算没有过期的value，所以相当于还是一个get。要先走一遍，检查过期的再计算。有兴趣可以看看开源的那些代码。https://github.com/apache/kafka/ ... tream/Windowed.java 欢迎大家说说方案，我是只有set是可以做到O(1)。小哥人不错的，指出了小毛病，大概我是写得慢，最终也没有跑程序，再聊了一下多线程读写如何解决。

第四场设计RSS feed，主要是聊API和数据库的设计，我就把第二轮的api又说了一遍，但是需求是有点不一样的。我觉得还是多问一下需求，然后想清楚再做设计。

第五场设计tiny url，遇到一位三哥。比较aggressive吧，喜欢打断别人说话，然后牵着你的思路走。你在做db 设计的时候，他会问你API设计，你再做API设计的时候，他又会打断你问你一些别的。怎么说呢，工作中也会遇到这样的人啦。。。这些都是常态，就当作是磨练好了。笑脸应对，一点点地去回答。5场下来，其实没有很累，题目说难不难，大概我是佛系了还是怎么的，我每次回答问题我都会去思考他为什么要问这些。



1. coding: WindowedMap, 实现get, put, average. 很多面经提到过
2. coding: 实现task scheduler interface: schedule(long delay), 这个不知道他们内部怎么统一考点的，我这个国人面试官直接说主要考察多线程，不用java的话可能不太好写。。。好吧，我说用一个blocking的priority queue, 但是我忘记具体是那个类名了，他说他也不知道，不然自己写一个？我就说先放着，假定我code里这个queue是blocking的priority queue， 后面主要讨论如何consume那个queue并且尽量减少spinning wait. 然后我开始写用wait/notify， 期间他提醒有个小问题我改了。后面写完后没啥时间了，他总结说“only thing left is the blocking priority queue", 我想着无伤大雅，没想到国人大哥把我挂了。
3. system design: tiny URL, 一个国人小哥，可能刚开始当面试官，明显是拿着一个check list逐个来问的， go through完了后就OK
4. behavior: 一个烙印director，非常拽的感觉，面试的交谈过程体验很差。感觉他家director好多都是烙印
5. system design: single instance kv store, 这个不知道用意是啥，感觉考得比较偏。没准备过的估计很难答，我就先从read/write/space amplifaction 谈起，然后我对cassandra还算熟悉，就把cassandra的设计说了一遍，mem table, sstable, compaction, tombstone，各种cache, etc. 因为面试是周五下午，并且正好是confluent 提交ipo消息出来的第二天，小哥已经心不在焉，准备欢度周末了，愉快地结束了面试。



被要求设计一个taskScheduler，说是要实现一个Schedule(Runable Task, long delayMs)，然后按大家的经验我也开始巴拉巴拉各种说多线程，完了之后那老头说不对，这个和多线程没关系，我要求的就是schedule task，完了之后不用管task什么时候执行，OK，然后我就说那就弄一个queue或者list把我schedule 的task全放进去，然后根据delay time来给他们排序，schedule一个就插进去一个，老头说太好了，你终于get到我的点了。然后我巴拉巴拉开始写，他又说了不对啊，你们C#没有Heap没有PriorityQueue吗，我说没啊，但是我可以花几分钟实现一个出来OK不，老头说不行，我们没时间了。那你随便写一个吧。我说好啊O(n)插入差了点，要不我用binary search吧，老头说这是啥，啥事binarySearch我不知道，我简直要开骂了。这种智商好意思出来面试人。纯吐槽帖，太气人了。花一天时间出来被丫全搞恶心了。



他们家面试挺practical的，跟店面style很不同（店面直接问我一道regular expression，纯算法）。

coding 1，multithreading。手动实现一个delay execute task的libraray。api就是 void delayExecuteTask(Runnablbe task, long delayMs)

codinig 2，实现一个libraray，给以一系列的incoming的kv的event，能够对过去一个时间window的event进行简单的query。

假设这个window是5minn，要实现的api有：

[Java] 纯文本查看 复制代码
?
01
02
03
04
void addEvent(String key, int val); // 存一个新event
int getKey(String key); // 如果过去5min有这个key，就返回value，否则就是exception
void delete(String key);
int avg(); // 返回过去5min所有event的平均值

系统设计，kv store。somehow在面试官领导下，主要的focus是single node内部具体kv的实现细节。所以说白了就是设计个简单的db engine。



第一轮就是三姐面的多线程，我问她是不是多线程，她叫我写single thread, 完了又叫我写两个线程的，我写了consumer 和producer,
就用priorityQueue 和 lock. 我面之前准备了多线程的，还看了他们的blog, 结果死活不让我直接写多线程，写完两个线程就没时间了，
然后给我来个多线程不强。。。我是专门上过多线程的课的好不好

第二轮是windowed processor 实现 put(key, value), get(key) and getAverage()
这个没啥问题，很简单。白人小哥，表示很满意

第三轮
design a feed publish system， 这轮有问restful api 的基础知识，比如让你写出来 http method : POST,
URI: /baseUrl/subscribe
然后还会细问database 的设计，foreign key, 一对多，多对多这种

第四轮 design tinyUrl

这轮中国小哥面的， 因为提前准备了，回答得小哥很满意

第五轮 烙印manager, 迟到五分钟以上，就谈了十分钟就走人了，说他管理九个组



一个function class：{isvardic,signatures，function}
input是一个list of function object，写一个getFunction（signatures）返回所有有这样signature的function
follow up 1:如果getFunction(string,integer...)这样的怎么处理
follow up 2:如果getfunction(string,Null),null可以代表所有可能性
follow up 3:同时实现前两个follow up
原贴：https://www.1point3acres.com/bbs/thread-550026-1-1.html

面试官感觉是很负责任的，知道出错了主动联系了recruiter。然后我答得也不太好，不过侥幸过了。这期间还催了一遍结果，然后被告知会有下一轮电面的时候，还催了一遍schedule。拖拖拉拉的几个星期了，recruiter真的不负责任。

第二轮面试，面试官上来就问我是不是今天第一轮面试。一听就感到不妙。这不是电面该问的问题，电面不是一天只有一轮吗。果然，出了一道on site的面试：

实现一个taskScheduler，要实现的api有
delaySchedule(Runnable task, long delayedMs)
从单一线程讨论到多线程

这道题地里面经挺多的。其实不难，而且我也找好了一些资料准备过了电面，然后去准备这道题。结果谁知道电面就出现这道题了。

那道经典的wild match并没有遇到。。。





电面问的是wildcard matching， 本来一个小时的onsite 30 mins就结束了然后过1小时给了onsite。
VO：
1. 实现一个libraray，给以一系列的incoming的kv的event，能够对过去一个时间window的event进行简单的query。

假设这个window是5min，要实现的api有：

void put(String key, int val); // 存一个新event
int getKey(String key); // 如果过去5min有这个key，就返回value，否则就是exception
void delete(String key);
int avg(); // 返回过去5min所有event的平均值

avg() 会被call的很频繁所以务必确保Big O不是线性的, 这轮optimal 实现其实代码还挺多的， 要注意抓紧时间。

2. 实现一个taskScheduler，要实现的api有
delaySchedule(Runnable task, long delayedMs)

从单一线程讨论到多线程

3. design
tinyUrl, 随机给问题， 问到了DB的实现包括B tree等等

4. design KV store
和上一轮异曲同工。

5. Behavior

总的来说他家面试体验非常好， 面试官都很聪明， 谦逊而且活泼， 代码轮的面试官全是debug小能手， 一起裸眼debug非常酣畅淋漓。 design 轮的面试官知识面也都非常广， 估计平时工作中接触相关内容也比较多的原因。





不同的是 一开始被要求 star 只有一个或者0个 这时候你得写出一个很简单的 方法。我的方法是pattern以star 为界限分成左右两个part 然后去看str有没有startswith 和 endswith 这两个

然后被要求star会有0或者很多个，开始你的表演。DP吧。也不能一开始就想到DP，循序渐进吧，表演嘛。假装不会，画个图啊 啥的 2D的图画出来，箭头弄起来。

完了之后complexity必要的问题

worst case是啥啊之类

各种test cases啊，有个edge case 我没想到被点到了
str = "a"
p = "a*a"





还是面经里那几道。电面寺寺

昂赛是类似LRU和delayed scheduler, 设计短网址，RSS feed

设计题问得并不深，每个面试官侧重点也不一样，比如我遇到的都不在乎traffic计算，只需要你设计能horizontal scale就行。第一个面试官也不在乎NoSql和Sql的比较，就围绕sql问一些followup就结束。后面一轮设计则是很快就结束。

反倒是hiring manager behavior轮，之前看的面经都说聊得很轻松，我这个问问题却很认真犀利，虽然也还是属于常规问题的范畴，但还是要好好准备才能答好





wildcard matching，隐约记得里抠得有这道题。最后问我test strategy是啥，我说unit test，面试官是也行但也有其他答案的感觉，不知道他想要啥🤷‍♂️。
func(v: string, pattern: string): bolean

一些例子：
sun, s*n -> true
sun, s* -> true
sun, m*n -> false





# Facebook

LC 1249
数据结构 设计 hashmap+ last() return most recent access element （LRU）



应该跟这题一样： https://github.com/Elffers/techn ... ster/fb_stickers.rb。

只是input 规定要 source and target
Write a function that, given a string consisting of a word or
words made up of letters from the word 'facebook', outputs a minimum number of stickers needed.

minNumber("facebook", "coffee kebab") -> 3
minNumber("facebook", bee") -> 2
minNumber("facebook", cook") -> 1



算法一： 一个sorted list里面找一个target出现的次数,可能不出现
Print binary tree view from right. Level order traversal

behavioul轮最后十分钟：Remove minimum parenthesis to make a string valid

算法二：Return how many continuous array has sum of k. 第二题想不太起来了。
design：刷题网站



1. 给一个字典字母顺序和一堆词，判断词是不是按照dictionary的顺序排好
2. 给一堆intervals，找到落在最多区间的其中一个数



1. 增序排列整数array， 有重复， 给定一个target， count有几个
2. 乱序 整数array， 判定是否有elements满足， a*a + b*b = c*c



1. 给一个Binary Tree，return max edges

例如
             1
           /    \
         2      3
       /   \       \
     4     5       6        

4 - 2 - 1 - 3 - 6

return 4

2. 假如这个Tree是有N个children如何做，和面试官确认了max edges还是从一个leaf到root到再另一个leaf



蠡口物流领简化版，只需要return true/false，followup是如果都是正数怎么优化



不久前的zoom final round，代码题都很简单，我就记得其中两道了。。蠡口 漆一 和 漆二一
关于系统面试那一轮，HR给我选的Product Design，不是System Design，我当时也没多想，看看感觉其实也差不多就从了，结果问了如何设计i18n，完全没头绪。



1. bst to balance tree.
2. given a list of string, return all prefix pair strings.



电话面试两道题第一道酒儿腰 要求最好的解法 第二道药溜巫灵



第一题 恶傘琶
不想演太久 问一下输入格式、边界条件跟特殊情况直接O(N) + O(1)做
第二题 恶舞
这题好险我还算熟 不然剩下20分钟要写还真的容易出错 先给出recursive + iterative(helper function)解法，
面试官又要求空间O(1)解法 先解释我的想法 implement卡了几分钟 没写完 可能最后还有一两个bug没改完



第一题 给个int，想象这个int是显示在计算器液晶屏的那种数字，问旋转180度后跟原来的数字是不是一样
follow up 给个长度，输出所有这个长度符合上诉要求的数字，backtrack即可

第二题给个list of interval, 输出有多少个overlap，时间不够了只说了思路
没想出来有什么优化的做法。。。直接暴力O(n^2)每两个interval比较一下



第一题  整数相除 不能用除法  秒过
第二题 不是力扣上的   给 一堆 （x,y)点。 求最大的重叠数。



儿留爸的变种 找2个missing number



coding 1. subarry sum equals to k
coding 2. 刷题网 🌂药妻





https://www.geeksforgeeks.org/construct-tree-inorder-level-order-traversals/



1. 写代码。medium难度的题目，但是第一题其实有个bug，然后我口头说了解决方法，面试官说这个做法能work，于是push我做下一题。都是地里常见的题目
2. BQ。都是常见的bq，最后写了个tree的easy题。
3. Sys Design，设计一个在线评论系统。都是我在说，对面其实比较少feedback，最后在某些设计上我跟他也许（？）达成了协议。但是时间不太够，没太讨论scalability和fault tolerance，估计凉了
4. ML Design，设计一个名人推荐系统。国人老哥，我画了个图，然后老哥大概让我每个地方都讲一下feature label和model，最后让我讲一下lambdaMART是怎么训练的
5. ML Design，设计一个地点推荐系统。一个engineer manager，没有画图这次，主要是讲了fitlering和ranking这两个module都是用的什么方法来train的。
6. 写代码。medium难度的题目。不太难，都是地里常见的题目。





第一轮 蠡口二舅 + 榴尔妖 第一题是要按照面试官的顺序给output 不是最优 但是问题是不知道面试官要的顺序是什么 就三个test case。。这题如果考虑general case根本没法做。 这一轮没答好
第二轮 就是一个找每层2X 树的平均值 + 一个 lc 气妖的变种 就是给你一个当前文件目录 然后给你一个cd cmd 要你求出来最终你会在哪个directory下面
第三轮 设计一个ins电商的竞价拍卖功能，假设这样物品有很多人拍卖怎么办
第四轮 BQ+knight dilaer 假设棋盘无限大 怎么办。 有些地方会被block了  楼主答得是bidrection





- 系统设计：facebook status search
- coding，运气比较衰，都不是高频题，也没刷过，倒也不难，只是现场的时候写的有点急，结果挂在了coding
1. 类似字符串相加，只是输入和输出是digit array。
2. 一个链表，每次取首尾节点连在一起，直至结束，要求in-place。比如1->2->3->4，输出1->4->2->3
3. 一个二维数组，数字表示高度，计算一个最小高度，使流水能从左上流到右下。





第一轮 Coding： 国人大哥，后来发现是朋友圈不点赞好友，第一题是一个简单的trie， 第二题是司儿流，大哥问了很详细的每一步骤，包括如何一行一行的解释，带例子进去怎么跑，特殊情况怎么处理，某些关键行怎么理解
第二轮 Systems Design： 华人小哥，黑车设计，没有拘泥于某一个组件的设计，更多是全程流畅说下来，小哥很给力会给提示并且帮你总结，小天使！
第三轮 Coding： 印度美少女，妹子真的太好了全程互动，两个题都不是tag但是常规题
第四轮 Systems Design： 华人小哥+阴影全程不露脸不说话大哥， crawling那道题，这道题完全是要考分布式，菜鸡本人完全没准备一顿胡说，当时面完觉得爱已经消失
第五轮 Behavior/ Coding：美国大哥，出了一个很简单的hash题目然后有follow up(如何提高空间复杂度，答案是hash用完的东西可以删掉), 非常多非常多的bq，并且要是in detail那种，会不断给提示让你达到点上， 同事的冲突/最自豪的项目/有没有新的突破/如何与pm沟通/ddl完成不了怎么办



1.
left most colume have 1
check if string is parlindrome, ignore non a-z A-Z chars
2.
max depth of parentheses of expression , (a+b*(c+d)) return 2, need to check and validate parenthese as well
k closest coffee shop
3.
distributed web crawler
4.
continuous subarray with target sum





两轮coding 都是利口高频。之前面试遇到东欧姓氏的大哥都是给出特别难的题，这一次的东欧大哥给了两道easy，真的感谢！

两轮design
- Web crawler (一开始我设计的是有中心化数据库的，这一轮面试官要的是完全去中心化的架构)
- Async system

一轮BQ + atoi



O总共五轮，三轮coding，一轮system design, 一轮BQ+coding
1. longest increasing(or decreasing) path by 1 in a matrix, 可返回长度或具体路径。
1, 2, 3
9, 8, 4
8, 7, 5
1 -> 2 -> 3 -> 4 -> 5
follow up: 讨论了时间复杂度，空间复杂度，以及trade off

2.1 floating strings相加： "183.45" + "213.25" -> "396.70"
2.2 三司令
follow up: 每题的时间复杂度和空间复杂度

3.1 贰舞贰变种
3.2 要舅舅
follow up：贰舞伞变种，和所有时间空间复杂度

4. newsfeed
5. 正常的BQ和一道简单的coding: find all local peaks and valleys



1. coding。国人小姐姐超级nice，尔而起，以及一个单调stack的题（不好意思，原以为自己记得住，结果过了几天之后完全记不起来细节了），两题都秒了，有一题一开始有点bug，不过应该是改对了。
2. design。让人比较崩溃的一轮，设计newsfeed，楼主之前看了不少design的课程，但是面试的国人大哥全程不讲话让我自己一直说，我跟他说有几种design options，分析了一下利弊想问问他想选哪个，大哥让我自己想，当时就感觉他态度不太好了。后来又碰到一个design选择的问题，我又分析了一下，然后问大哥想选哪个，然后他态度就明显大转弯感觉有点passive aggressive，我跟他解释了一下我之所以提到几个option，是想根据use case分析一下利弊，但是解释似乎也没有用，面试完后recruiter也说这一轮的feedback是比较weak。。。感觉也是挺无语的，design轮碰上不交流的面试官真的超级蛋疼。
3. coding。超级nice的亚裔，要领而起和尔灵灵，基本上是秒了
4. bq，天竺姐，一开始讨论的很嗨，时间逐渐要结束了，我以为这下没问题了，已经开始想下一轮了，结果天竺姐突然话锋一转，要问一个小coding。虽然coding本身不难（真的是要抱歉，完全想不起来问了啥了），但是因为不是刷过的题，我当时心态突然就懵了，也可能是因为担心要上卫生间中午吃的特别少可能有点低血糖了还是怎么滴，满脑子都空白。感觉天竺姐也知道时间有点不够，问她input和output也明显不给我好好讲，最后有个其实挺好改正的bug也没给我时间改，挺无奈的，跟recruiter打电话的时候也说了一下这个情况，recruiter是hiring committee有可能会考虑一下。
5. coding, 白人面试官，就散吧和要死刘的变种。两题都不难，但是bq那轮懵的我根本没缓过来，导致第一题那么简单的题写来写去各种bug花了好多时间才完成… 最后第二题也没有时间写完了（但是写完了绝大部份核心函数）。现在想起来，b‍‌‍‍‍‌‌‌‌‍‌‍‍‌‌‌‍‌q那轮崩了之后应该要求一个bathroom break好好平复一下心情的，可惜了。。







VO 两轮code,一轮 system design

第一轮 code 两道题

第一题找出 local mininum, https://www.geeksforgeeks.org/find-local-minima-array/
第二题实现一个hashmap，要求可以 set, get, 以及 getLast， https://leetcode.com/discuss/int ... gh-Twitter-Question

第二轮 code 两道题

第一提类似 https://leetcode.com/problems/simplify-path/
第二题 3 sum 变形，就是给一个矩阵，要求从矩阵找出 a^2 + b^2 = c^2 的三个数

system design 要求‍‌‍‍‍‌‌‌‌‍‌‍‍‌‌‌‍‌设计 web crawler，但是要求是完全 distributed

补充内容 (2021-07-11 20:30 +8:00):
第二题 3 sum 变形，就是给一个矩阵，要求从矩阵找出 a^2 + b^2 = c^2 的三个数





脸颊vo, 求大米。面6

coding1:  刷题网 拾陆 ， 外星人词典
coding2:  刷题网 期漆， 刷题网 舞溜
design 1: typeahead/auto complete
design 2: newsfeed
bq:  mentorship, challenge project, 等等‍‌‍‍‍‌‌‌‌‍‌‍‍‌‌‌‍‌吹牛。没coding





1. 716
2. 983



Behavior和系统设计轮一般决定了面试者的level， 想拿大包裹高level的同学需要好好的准备这一轮的面试。

首FB对于不同level的面试者的期望。E4一般都有<5年的工作经验。相对于E3， 面试的时候希望E4可以通过自己实际的工作经验讲好自己的故事
对于behavior面试中最重要的redflag是发现candidate回答的不够具体没有类似的经历

对于E4， 面试一般衡量以下几个dimension
motivation： 理想的candidate是想要build good product， learn technology knowledge to solve problem for users.
empathy: 有同理心可以从别人的角度看问题， 在和manager或者同事有矛盾的时候，可以从对方的角度考虑问题了解对方的concern和建议中合理的地方
proactive： move fast，可以自发的工作， 主动推动自己负责的project的change或者shift。
perse‍‌‍‍‍‌‌‌‌‍‌‍‍‌‌‌‍‌verance： 在项目进展不顺利的时候，可以把问题当成挑战，找出新的机会
growth： 展示自己可以在新的领域快速的ramp up
communication：平时如何可以清楚的update自己工作。比如自己发过的一些weekly的update。 meeting中如何manage time等等





利口三姨第二题是给个bst，把在范围内的node的值加起来，太简单了就不找原题了



第一题：（不知道lc题号，有也应该是easy）
给个int[], 问有几个monotonic seq
e.g. [1,2,5,3,2] 返回2因为有一个递增和一个递减。
写了个简单的O(n) solution， 跑了几个test case，加了一些edge cases handling (e.g. [1,1,1,2,2,5,5,2,1,1], [8])
说完Time complexity面试官就说ok了

第二题：（不知道lc题号,大概是easy/medium）
給個sorted int array和k，问有没有两个数的diff=k。
先说了可以用hashset扫一遍。Time和space都是O(N)
然后有点傻了，尝试用binary search找O(log(n))解法。 想了10分钟没结果。结果面试官说O(N)就可以了 (经验教训是应该早点和面试官交流看要不要继续优化)
写了hashset的解法，跑了几个test case没问题。但是我心里想这肯定不是最优解，要不然太简单了，而且sorted的feature没太利用到

面试最后5分钟想到还可以用two pointer。说了解法和big o(time是O(N)， space是O(1))但是最后剩一分钟，面试官说不用写了。
two pointer解法就是两个po‍‌‍‍‍‌‌‌‌‍‌‍‍‌‌‌‍‌inters从0开始，right pointer向前移直到right-left >k, 然后left向前移动直到right-left <k, 中间可以check right-left == k.





1. 蠡口歧义。小变化，给了一个cwd代表当前所处dir。如果path的第一个字母不是'/'的话得从cwd开始找路径。
2. 没见过的题。直接给Skiplist，找一个value在不在Skiplist中。乞丐版‍‌‍‍‍‌‌‌‌‍‌‍‍‌‌‌‍‌蠡口瑶儿凌柳。时间复杂度logn.



第一题 看是不是Palindrome。 输入值不止字母。
如此简单的题还写了个bug。在跳过非字母的时候逻辑有点小问题。跑testcase的时候发现改正

第二题 二维地图求最短路径，要求把最短路径整个输出
脑一抽没有立刻想到backtrace的方法。。于是先写了找路径最小值的解。写的过程中想到了怎么backtrace，然后写出了最后答案。小哥满意。但指出了一个边际条件的小bug，立马改正。自己跑testcase的时候又发现一个corner case
，立马改正。

两题做完还有十分钟不到。聊了聊复杂度，小哥觉得答案应该没问题。最后问问题结束。

面完心情十分沮丧。两道题都是基础地不能再基础。没刷过题的都应该知道怎么做。送分题本应该bug free 秒的。结果每道题都写了小bug，还有点小卡壳。





贰伞
酒舞叁

第一题有点小变化，需要考虑去重





coding 1： 实现cd parser， 输入为当前路径和参数， 输出为最终路径例子1，
当前路径： “/bar”
参数： “foo”
结果： “/bar/foo”

例子2，
当前路径： “/bar”
参数： “.”
结果： “/bar”

例子3，
当前路径： “/bar”
参数： “..”
结果： “/”

例子4，
当前路径： “/bar”
参数： “/foo”
结果： “/foo”

coding 2: 是否存在subarray sum 等于 k， 找出 array 的top k元素

design youtube video service

design live comment‍‌‍‍‍‌‌‌‌‍‌‍‍‌‌‌‍‌

行为 + easy coding





补充内容 (2021-07-09 00:49 +8:00):
coding 1还有个vertical travel binary tree





一个月前面的，发上来攒攒rp第一题很像药物欺凌，不是sparse而是repeatable
第二题气流流





VO是 2轮code + 2轮design + 1轮BQ

有一轮设计是 streaming process相关的，资深烙印，很考验细节和功力，面试官很喜欢打断我然后追问，基本是想到哪问哪， 读写分离，failover的具体细节（非常细，涉及到分布式的很多细节），hot shard 之类，然后频频question我的design，比如跟我扯了一通cardinality的量级，然后质问我，这样设计还work吗。
总之问的很多，而且一旦发现我这方面比较懂，立马切换话题。。。。 感觉是高压面试风格。。。。

两天后HR打电话来，说SD有concern，但是还是会送HC， 找我要reference， 估计凉凉，准备move on了





店面 两道原题 幺儿泗舅 和 撕二骝问了test case 设置目的，还有复杂度



F家recruiter 主动联系的，想了想就答应了。电面是个🇹🇼大哥，英语听不太清楚，话不多。
第一题很简单，鲤扣鲅鲅。
二话不说开始写code,  没想道大哥不太高兴，也不问问题目搞清楚没有。
最后写完了耐心解释及跑了几个例子。
第二题理扣没有，就是一个图像处理的square filter, 就是对于图像的每个像素都乘上一个f‍‌‍‍‍‌‌‌‌‍‌‍‍‌‌‌‍‌ilter. 题目不难，但是大哥认为复杂度算的不对。





1. coding: 骑而毅
2. coding: 类似三妖斯
3. design: 设计一个简单的fb news feed
4. design: 设计一个short link service. 任给‍‌‍‍‍‌‌‌‌‍‌‍‍‌‌‌‍‌一个url，返回一个短url。



第一轮 亚洲招聘经理 都是经典bq + 蠡口散丝第二轮 白人码农 简单atoi + 没见过新题 input 是非负数整型数组 和一个整数k 要求找到 largest sum of any 2 non-overlapped k-size interval
[1,2,0,3,4], 2 => 结果是10, 我用的 prefix sum + treemap nlogn
第三轮 系统设计 感觉最差的一轮 日本面无表情卷毛狗面试官，design typeahead, 感觉跟我说不到一起，我说的他都要clarify，他说的我也要clarify, communication 浪费了很多时间。时间结束我还有很多点没说。
第四轮 友好国人 也有新题 第一题 买卖股票‍‌‍‍‍‌‌‌‌‍‌‍‍‌‌‌‍‌延展，input 是 非负数整型数组 代表股票价格，在每天只能做买股票或者卖掉手中全部股票，求最大收益。面试官一直引导我最后写出解，点个赞。
第二题 穿马甲的蠡口霸气无。





利口耳领巴 新requirement是打印符合prefix的所有string 可以用stringbuilder + dfs走一遍





Facebook的recruiter直接email联系的，申请的是NY的Senior Frontend的职位。第一轮面试1小时，中国人小姐姐，人很nice，LC140，原题。面试的过程中感觉交流和口述跑test cases特别重要。
当时小姐姐特别提示说把跑test cases的每一步都写出来。





我查了一些资料说product design注重产品和api设计。那请问是不是就不会考design crawler，design nearby，design top k这种类型的题了呢？我只准备了news feed，online j‍‌‍‍‍‌‌‌‌‍‌‍‍‌‌‌‍‌udge这些不知道够不够





问了大概二十分钟behavioral，给了2个coding（久舞三 和 三石寺），都是原题。面试官人也很nice，也没有要求太严格，code没有要求run，就是写到editor里即可

补充内容 (2021-07-03 07:23 +8:00):
面的级别是E5或者E6，recruiter说看最后的design的情况，但是一般只有发挥很好才能给到E6

补充内容 (2021-07-04 07:03 +8:00):
bq有两个问题
第一个是问有没有stakeholder对于组里的流程提出建议，怎么做的。
第二个是问有没有组里和其他组合作的时候有不同意见的时候，如何解决的





1. 白人小哥。散似霸+二百。第一题写完后有个bug，小哥说你口头跑一下，跑的时候发现了改过来了。后来小哥觉得我啰嗦就说好了，下一题。这轮感觉第一题因为没睡头脑不清楚所以写的有点问题。
2. 两只阿三。伊尔丝舅+伊尔丝。master三跟我面，shadow三连摄像头都懒得开。
3. design。设计一个系统，可以随时查找一定范围内所有的餐馆，返回餐馆的位置和评价等相关内容。一个阿三面的，面完之后感觉很‍‌‍‍‍‌‌‌‌‍‌‍‍‌‌‌‍‌不好。
4. BQ。亚洲小哥，感觉还是挺nice的，他是occulus组的，感觉他们组人不多，平时挺忙。





1. 而散菱
2. 药丝流



第一轮BQ。常规BQ问题。
第二轮coding。刷题网 伊散司私，霸硫散。两道题目都没做过，感谢国人小哥疯狂放水，给了一堆hint。
第三轮coding。第一问是给了两个string，target和source，问source中的字符能否组成target，source中的每个字符只能用一次。这一问很简单。第二问是刷题网 琪遛。
第四轮system design。设计一个instagram。一开始把requirement都列好了，然后开始设计。中间问了几个问题: photo upload失败怎么办？需要多少host？感觉这一轮答得不行。





肆亿伍

酒气散



店面：
题目：蠡口揪雾毵，意尔私揪 (开始用栈，follow up 要求不用空间)

VO：
1: BQ，正常题目，最有挑战的项目，与同事冲突怎么办 code: 蠡口刘巴林

2: code, 蠡口尔毵霸，要啾啾（follow up zip 型打印）
3: code, 蠡口拔儿气，真的是道难题，幸好做过，要不然就垮了
4: code, 蠡口尔私揪，另一道不是原题，但不难，类似散逸
5: design, 设计 top k song





码：1. 高频题 number of k in sorted array; 2. image convolution
设计: 1. world scale 三维重建 2. ego motion tracking for mobile ‍‌‍‍‍‌‌‌‌‍‌‍‍‌‌‌‍‌device





店面
+ 时间：5/10/2021
+ 题目：蠡口柳把领，意起伞。
+ 感受：顺利做出来了两道。溜吧领那道题看似是easy, 但是面试官直接提出需要写出O(N)的解法。后面一道follow up了如何把recursive写成iterative，当时还有时间就顺便写了一下。
总体来说不难，面试官也给hint。

昂赛
+ 时间：6/18/2021, 6/21/2021
+ 题目:
++ 第一轮：非蠡口题，是那道pairs of non-overlapping pairs of equal sums。面试时头一次看到，当时有点紧张。最后只写了这一道题，follow up只是谈了一下优化的可能策略。
++ 第二轮：系统设计，News Feed
++ 第三轮：behavior，外加改版蠡口已留尔（改动是：整个array保证有且只有一个global peak，没有local peaks）。面试官提出直接写log(N)解法，因为behavior聊完后只剩下15分钟了，于是匆忙写了binary search的解法。
++ 第四轮：第一题类似蠡口尔耳漆，但稍微简单一些。第二题蠡口易思柳。总体来说不难。





第一轮 SYSTEM DESIGN， 设计一个拍卖系统
第二轮 恶妖伍，另一题找不到原题，就是找最大的子树，非二叉树
第三轮 第一题找不到原题，大意是字母消消乐，给一个字符串，如果有相同连续字母则删除。第二题也找不到原题，大意是给一些TASK，和一个C‍‌‍‍‍‌‌‌‌‍‌‍‍‌‌‌‍‌OOLDOWN时间，得出完成所有TASK的最小时间，TASK的执行顺续要求和输入顺序一致
第四轮 BQ，聊聊过去做过的项目







# News Break

蠡口： 幺三九， 而要三 抢房子，散而（返回最长的括号），而留腰，要领悟（followup 是用itterative的方式写）

给一个string,要打印出所有的permutation,followup是有重复character,我就sort了字符串,然后在dfs里面加了一个条件



店面 非常简单 洱爸留

昂赛 莉寇会议室2 一个dijkastra裸体 设计个facebook首页 设计credit card支付系统



电面

给一个Integer strem 实现O(1)时间内的getMean和getMode

VO
1. 利口 儿酒奇
2. design 设计reporting system
3. 利口 思令伞
4. 聊之前的工作



刷题网四舅舅 和类似的一个 迷宫



第一题，给一个目标值 val，和一个二维数组mattrix如下，判断目标值是否在mattix里？
转成一维的数组，二分法秒了。
/ Example:
// [
// [1, 3, 5, 10, 13],
// [15, 17, 22, 24, 25],
// [26, 27, 29, 30, 31],
// [33, 36, 37, 38, 43]
// ]

// target = 3 => true
// target = 20 => false

第二题：
一个迷宫mattrix，里面有门‘G'，和墙’W‘，判断每个空地离最近一个门的距离。
BFS 秒了。

Example:
W: wall, G: gate, _: open space
_ W G W _
_ 2 1 W _
_ W _ _ G
W 4 3 _ W





newsbreak电面，就一题，leetcode 886.



给一个二叉树，找到根节点到叶子节点的最大和，递归秒了，貌似看写的很快，加了难度，找出从任何节点开始的路径的最大和，路径可以往上再往下



分享一个news break的OA+电面。linkedin上猎头找的，那就面面吧。 申请的职位是senior full stack engineerOA 刷题网
1. 239  
2. perfect string count 不是刷题网， google 搜一下就有原题

电面
1. 聊简历 + 721. 面完了hr说还要再面一轮电面， 真的好麻烦
2. 聊简历 + 785. 写完后有个小Bug。很快改完了。面试官fb跳过去的，可能要求bug free吧



android岗第一题：利口 起舞
第二题：利口 散散



1. 二叉树根到叶子节点最大和
2. 二叉树任意节点到其他任意节点简单路径最大和
3. 常识问题



1. 以前项目经验以及思考
2. 设计超小网站网址
3. 设计类似脸书新闻馈送 后台，怎么支持已读功能（把已读的内容从推送中删除）
4. 代码，一共整数数列，找出一个局部低谷值（就是两边相邻的数都大于它， 假设数列两端是无穷大）,类似于麻省理工公开课里面，第一节课，找极值得例子： https://youtu.be/HtSuA80QTyo



店面一开始大概一半的时间在介绍公司和组的情况，问了一些经历，主要是聊是不是match。接下来就做了一道简单的题，类似刷题网易散零遛。





店面两道题
1） 刷题网 尔柳腰  用并查集解得
2） 类似刷题网 易思舅坝 ，输入的数组没有重复的，要求最小和最大值正好等于目标值 （最小和最大值可能是同一个数）



前半个小时聊背景，聊项目，探讨技术细节，后20分钟做了个简单的题。LeetCode 785 一模一样。



然后做题给出一些文件目录["/a", "/a/ab", "/c/def/gh", "/a/ab/cde", "c/def"，“/c/xyz”],
像“/a/ab”这种是“/a”的子目录。返回去除所有被包含的子目录后的结果。
比如这个例子就返回["/a"，"c/def"，“/c/xyz”]



Phone Interview

1. 蠡口无留领
2. Check if there is circle in a graph


VO
1. 蠡口尔散灵  但要求可以多次查询，并且优化性能，所以每次都traversal是不行的
2. System Design：Design crawler
3. System Design：Design calender
4. Project deep dive + 蠡口散吧领，但有点区别是这里要求是保存key-value pair (原题是只保存value就可以了)



面试我的是一个国人大哥。前二三十分钟问问题，聊自己的经历和对他们公司的提问，后面十几二十分钟做题。题目很简单，给两个linked list，让返回是否有相交。
面试官口头解释了下题目，例子和框架都需要我自己写。
我用的交换头指针做的，过了自己想出来的3个test case 也提出了头部为null的情况。
不过面试官就一直问能过所有的test case吗？我就自己提出来一些可行性，不过面试官没有给出更多提示。
最后描述了下有cycle的情况，提出可以用HashSet来寸explored nodes
过两天发邮件说挂了。觉得自己在交流和对问题的clarification都做得算是到位，中间有一点磕碰，不过结果是过了，可能他们喜欢闷着头上来答题一遍过的类型吧。



电话面试了一下newsbreak的new grad mobile engineer的岗位。
开始上来就是介绍了一下公司，然后问了一下移动端开发的经验。
面试官说既然是开给new grad的岗位，所以也不需要什么移动端的经验。
做的编程题目是k个一组反转链表，先写了一个递归的，然后面试官看了还有时间，让我再写一个非递归的，这个时间不够没能调试出来。



面试官自称是VP，迟到了10来分钟，上来就聊过往经历，感觉希望进来又做开发，又做data，还要plan roadmap，blablabla...

最后20分钟做题，题目是 蠡口 衣散灵柳，小改，就是到了边界不算溢出，而是停留在边界上，DFS秒杀



一共四轮
第一轮manager聊天，behavior
第二轮 one edit distance，run test，问了一下如果处理a set of words 在industry怎么办 答online用multi threads，offline用mapreduce
第三轮 最长path in a binary tree，写了code没跑。然后0，1 matrix，0能走，1不能走，能不能从左上角走到右下角，在至多去掉1个1时。写了没跑
第四轮 news feed



# DoorDash

最大岛变体，求相同value的，讨论复杂度

VO
1. 开会时间, followup记不清了，挺简单的，好像是假设list按照start time sort, 然后用binary search找什么。。。不用写
2. 行为
3. 系统设计, slack, 群聊
4. 利口，followup, 如果这是个rest api,需要考虑什么
5. 和经理聊干过的项目。我准备了slides跟我要copy，我说不方便，他又说要截屏。。。



经典面经题 里扣 腰叁舞酒变形第一问验证valid sequence 同一个order先p后d 不可重复pd 所有order必须有p有d
第二问 给定order数量 generate所有valid sequence



第一轮写代码，这一轮具体题目忘了，但是不难大概中等难度。这一轮刚开始问了些behavior问题，然后在Codepair上面写代码。代码很快写出来了，最后还有了15分钟尬聊

第二轮系统设计，然后这一轮有75分钟。之前recruiter就通知我这一轮需要注意的是既要考察domain knowledge又要控制时间做系统设计。面我的老哥手里捧着沙拉边吃边说略带喜感，看上去是个随性boy。题目比较有意思：
设计一个慈善捐赠系统，需要做到以下几个功能：

1. 用户选择某个慈善机构，点击捐赠，然后跳出信用卡界面支付
2. 后台会需要跟信用卡接口进行对接，也就是说这个系统不负责支付细节
3. CEO需要知道每个慈善机构的捐赠数量，然后统一用一张pay check打到慈善机构的银行账户
我比较具体地分析了需求，交流下来确定这个系统不会有很高的qps之类，然后大概画了一下图，讲清楚了每个流程。他的问题是如果信用卡对接的API崩了怎么办，我就说可以用一个pending状态，等到恢复之后再试。或者直接在页面里告诉用户现在无法支付。总体沟通下来老哥挺满意。

第三轮是hiring manager面，一个感觉像是达瓦列氏的大哥，主要问一些behavior question，还有比如你是如何负责一个项目的，如何跟其他组对接等等。最后写了一个小代码，找第n大的数，用quick select很快就做出来了。他看上去频频点头，应该挺满意。

第四轮是写代码，这一轮是一个干了很多年的印度人。问了一道编译dependency最后输出顺序。其实就是那个经典的拓扑排序。A depend on B, B depend on C, 最后输出应该是C->B->A的顺序。我的拓扑排序已经很久没看了，当场大致讲了下思路，然后写出来有个bug，找了十分钟最后的最后跑过了。拓扑排序要是提前准备过的话应该会顺很多。

过了三天后recruiter通知我代码部分的datapoint不是很足，需要再面一轮，如果ok的话直接给offer，于是就又安排了一轮代码

加面的题目是有一个string的数组，每个string是由一些action组合起来的，中间用逗号隔开。现在让你找出现频率最高的三个连续action。

1. Pickup, Select, Run
2. Get, Pickup, Select, Run
3. Get, Pickup
4. Deliver, Pickup, Select, Run

这里输出的结果应该是 "Pickup,Select,Run"因为这三个出现频率最高。题目不难，很快做出来了。follow up问题是如果数据很大怎么办，我就说可以分布到多台机器上，mapreduce之类的。他表示ok





1, BQ。问了diversity, challenges, solve conflicts这些典型的问题
2，DD家经典的pickup/delivery的问题。第一题是判断是否valid，第二题打印出所有组合。第三部分跟之前看的面经不太一样，是把P/D generalize之后，比如说顺序是[A,B,C,P,D]，再判断顺序是否valid
3，System design，设计donation system(功能上就是简单的网页，选择charity，还有捐款量，最后点donate)
4, LC759，但是是先算单个员工，然后follow up是有了每个人的Free time之后算共同的free time。可以用1229做。

店面是max area of island拿dfs和bfs分别做。





面试官上来给了一个AWS Console 的链接和登录信息，还有一个不工作的URL。说有一个service 不工作，让我把他弄通。我从EC2 找到了service VM, 但不能从AWS Console launch 一个 terminal。我用的是自己的Windows laptop，于是需要现场下载Putty。好不容易登录到VM，发现webserver 是个用 systemd manage 的 Python system service。我把service 起来以后发现URL 返回4XX code。搞了一阵子发现需要把防火墙打开。然后发现URL 返回 5XX。读log和Python service 代码发现后面SQL数据库有问题。正在fix数据库，时间到了。

经验教训：如果你用Windows laptop的话，一定要先装上WSL2，确认有个Linux terminal。其次把AWS Console 和firewall configuration 搞明白。另外Python，SQLite，systemd, curl 都要熟练。

我其他轮都轻松过。唯一可能有问题的就是behavior 里的 diversity。我近五年都是和亚洲朋友们（中印韩）工作，所以答的比较牵强。





1. 自我介绍
2. 算法问题：给了一个List的calendar bookings， 要求返回所有在区间a 到 b内，大于duration的空闲时间段。

bookings = [[0, 10], [5,15], [20, 30], [40, 50]],
a = -5,
b = 60,
duration = 8
结果：[[30,40], [50, 60]]



申请的是Backend Engineer. One hour phone screen. 问题是类似leetocde Number of Islands.



1 1 1 2 3
2 1 2 1 1
1 1 3 3 3

找出最大的一个连续的相同数字的空间。上面就是返回6，只能横竖相连，不能对角线。就是‘1’。
非常快啊，我BFS秒掉了。他让run一下，我run了，有一点点小typo什么的，快速解决，run过了他给的4个case。

然后follow up。
如果可以对角线怎么办？
很快啊，我就加了对角线的4个搜索条件。

然后问，BFS和DFS的区别什么的。



e

1. 设计一个feature 支持捐款
2. engineering values
3. 找到k个距离餐馆最近的送餐员 如果距离相同 就比评分
4. pickup dropoff序列 (1)判断序列是否合法 (2)给定n生成所有合法序列 (3)求n的通项公式



1. project + SD 设计捐款系统前25min聊做过的project 问了很多细节 后面面试官看错时间SD题目又做了一个小时 导致每个component都问了问题 侧重backend
整体体验还不错 比较像交流不是考试 有的地方我没有做过答不上来 面试官会给提示然后我试着答  面试官看大方向基本对会提出个方案 然后我会继续就这个方案讨论几句
2. coding1 面经schedule meeting 给一个人的list of meetings和一个时间范围的start, end和 duration, 输出在时间范围内大于duration的空闲slot
followup不太一样 是给一群人的list of free slots, 一个时间范围的start, end和 duration, 在时间范围内所有人共同的free slots里找长度大于duration的
3. coding2 面经 离餐馆最近的top k dasher 代码量挺大的连写debug带test卡点完成
4. BQ 常见问题





Coding pd那题，第一问是不是valid 第二问全部组合，第三问，复杂度。
Coding 拓扑排序，自己定义自己写。
经理 bq
系统，设计一个群聊功能





给一个二位int矩阵，数岛屿的个数，里面有各种不同的value。

我用DFS写的，有点小bug出了stack overflow，自己改过来了。

Follow-up是问如果矩阵很大没法存到memory怎么办，可以存硬盘上然后maintain一个list of inputStream，每个row从硬盘里读。接着问DFS还能不能行？答说不得行因为会有Stack Overflow，应该用BFS，如果queue很大也可以overflow到硬盘上。





力扣绺啾雾 变种 找最大岛，但是每个岛数字不一样。





年初被recruiter联系，我是他家忠实客户，决定面一下，面了senior职位。

1/27/2021：跟recruiter聊，相互了解下。2/8/2021：第一轮，问了一道跟会议schedule很像的题目，在地里看到过面经，写好了跑几个test就成。
3/10/2021：VO设计：菜单review系统，可以看或者发review，可以点赞，对高赞用户有奖励。
算法+聊设计：给一个点返回附近送买外的人的位。可能不到15分钟写代码跑测试，剩下时间详细聊设计。感觉很像proximity服务器设计的题，问了数据库怎么设计，服务器怎么弄之类的，除了没写写画画以外感觉跟design轮一样。
算法：看到很多次pickup然后delivery的问题。现实判断是不是valid，然后打印所有顺序，最后计算有多少种可能，每问都落实到代码以及跑test。





先是简单介绍下自己以及what's the project that you were most proud of。

coding题是刷题网物流的变形，变成了calendar找空的时间来schedule会以及加了start time和end time，要求自己想edge case。



力抠 异散污韭



店面，一道题，利口妖妖尔就，没有follow up



VO分为四个部分：iOS architecture design，hire manager chat，implementation，debugging

Design：这个部分他们会给一个产品的需求让你去设计，要考虑到功能的延展性，不同layer的交互模式。主要以画出data flow的diagram和列出主要component的一些interfaces为主。第三部分也是实现这个功能，但是只不过不需要完全按照这part的设计来实现，毕竟时间有限。我的是一个类似于DoorDash的餐馆搜索功能（附带auto-search的小feature），以table view的形式展现搜索结果，然后点击其中一个打开餐馆的具体页面。

HM chat：主要是和招人的组的EM聊天。他会介绍他们组的职能，然后会问一些behavior的问题。比较informal。问了我最近觉得有趣的一个project。

Implementation：90分钟实现那个search的功能。从0写起，network layer，json parsing，auto-search和UI。一开始我还想按照第一部分设计的思路来（因为考虑到延展性，实现上会稍复杂一点点），但是写到一半发现来不及了。interviewer也跟我说优先把功能实现。后来我就不太注重细节了，最后基本上卡点写完了，但是没有时间去验证corner cases。这个部分建议大家可以在午饭时间构思一下怎么写，一开始就马上码起来。这部分交流不太多，明显的东西我就没有解释，如果稍微复杂的地方，我就说一下。

Debugging：这个模式我还是第一次见。Interviewer会发一个有各种问题的project，然后在simulator上跑。这个project里会有各种crash，stackoverflow等问题。基本就是每看见一个exception，你就去找到问题的所在，然后修了。同时还要解释这个问题是什么和解决方案的具体细节。感觉这部分没法准备，全靠平时的积累。考验你发现问题的能力和对iOS开发的熟练程度。



两轮Coding地里面经题，没什么好说的正常BQ，什么challenge，fail story，diversity之类的


Design题目是Donation system：

重点是charge event如何避免fail，第三方API挂了怎么办（transaction加一个column status比如Pending Complete Cancelled）
面试官要求第三方API不会realtime返回结果，也就是不能立即知道是否charge成功（真的有这种第三方API吗，难道不会破产吗hhhhh）
我给的解决方案是create DB scheduler event，扫一遍table把所有Pending状态的transaction的last_check_timestamp更新成当前时间，这样会产生一个binlog，Debezium监听这个change log发一个change event给kafka，consumer是一个verify_status service去call第三方API从而verify是否charge成功，成功了就更新数据库status为Complete。
第三方API挂了怎么办？ 这时Verify_service会返回NOT_FOUND，重新charge就好了。



最近换工作的时候看到这公司在我这个城市有新的site就申请了一波。然后新的site lead联系了我稍微聊了一下基本情况，之后就跟HR安排了电面时间

电面非常简单明了，面试官应该是一个11区人，一上来就互相自我介绍就结束了。接着马上就是进入coding，题目和地里其他朋友们说的差不多，就是给定一个matrix里面有好多integers，找最大block size。

Coding完了之后还有很多时间，就接着聊了15分钟公司的事情以及所在的team的细节。






LC 摇伞无酒 的变种

1. 给你一堆由Pn和Dn组成的String, 判断是否valid, 有很多条件需要判断.
2. Follow up: 跟摇伞无酒有点像, 但不是求个数, 而是打印出来所有的组合.



算法第一题，数独，就是leetcode里有的那一题。
算法第二题，其实就是top k。给一个json，有司机的位置信息，让找出离某个点餐者最近的k个司机。
说可以用quick select或者 heap。面试官让我选一个，我选了heap，实现完以后，又聊了如何parse json，没让写，就是写伪代码。

系统设计，先聊自己的项目半小时，然后一小时做题。是设计Yelp。
HM聊天，问BQ。经典的，遇到conflict怎么办，怎么带人的，如何克服困难的项目，重做一遍项目打算有什么改进。





而异灵的变种 给几个character的dependency，用topological sort求正确的顺序。注意面试的时候没有给API interface，需要自己想用什么data structure represent character dependency





第一轮，domain knowlege，聊过去的projects，问了一些project里面的疑难点和tradeoff，没有实质的technical问题。
第二轮，解数独，先问怎么validate然后解，很快写完然后开始follow-up。天竺老哥问你为啥要用2D array来存访问状态，有没有efficient的数据结构？我以为他要搞设么bit manipulation，结果他想要的是用一个Set，虽然我最后也没有听懂他到底怎么用这个set，然后问为啥不reuse第一问的function...
第三轮，面经老提了，pick-delivery，第一问判断是否valid，我用的Map去存order的状态，第二问生成所有valid sequences，第三问推导number of valid sequences的公式。
第四轮，HM，各种BQ常见题，比较惊人的是还问题到了diversity。
第五轮，系统设计一个generic的data pipeline来support analytical use cases。先clarify了MVP，天竺老哥一直对于requirement很模糊，不晓得是不是有意为之。画完架构图后就讲讲dataflow，问各个组件怎么interface，问到了input data什么format，答用avro/protobuff，省空间的同时而且pub-sub system可以validate schema on the fly，schema evolution可以通过一个schema metadata service来解决。然后问什么DW来support dashboard，我说用snowflake或者Redshift都行，老哥不是很满意说snowflake他们用过，dashboard有很大delay。我说我也没用过，我之前是用Redshift连Tableau的，速度没什么问题也。这轮感觉一般。





類似lc五路給一組array for meetings. ie  [3, 20], [-2, 0], [0, 2], [16, 17], [19, 23], [30, 40], [27, 33].
可以meeting 的時間 ie. [-5, 50]
找出free meeting time
可以先用lc五路找出merged meeting. 在loop一遍找出所有free meeting time





电面
说是一小时，实际只有45 min
先是相互简短介绍 大概10min不到，期间网络不稳，换成电话。

接下来coding
1 拓扑排序  自己定义自己写 返回bool ， follow up是 返回 结果list
2 最大连接区间的面积，这题只说思路



刷题网 一流🌂



最近面了Doordash的VO，一共4轮。
店面传送门：https://www.1point3acres.com/bbs/thread-724224-1-1.html

1. 日本小姐姐。感觉照片比真人好看。这轮60分。
问了一道 舅气散，也算是经典题了。这轮比较蛋疼的一点是我家的网络波动很大，前10分钟都在断线重连，最后面试官失去耐心了，因为她self introduce了3次都被网络打败。说我们直接上题。我说好的，然后就用电话给她拨过去了，同时在codingpad上做。先说了排序，然后是priority-queue，接着她说让我用pq写，我就开始写了。写完后我说quickSelect来一发？她说你还是多写几个testcase吧。于是我就闷着头写了一百行的tests，最后跑过了之后她说你怎么handle failure，我又加了failure handler。到了45分的时候她说停，你问问题吧。我就尬聊了10分钟，最后实在聊不动了，因为每个问题她都回答2句。不过她的英语应该是日本人里说的比较不错的，有明显口音但我能听懂个大概。

2. 一个中东小哥？看名字是中东的，但是！说话的口气很屌。这轮60分。
他一上来：Yo，what's up homie?
我：？
他：How's your day man?
我：good
他：Yo, we're going to do some crazy things, you ready?
我：？？？
这轮不是面经题，我当时心里直呼“擦嘞”。
题目是让设计一个class InMemoryDB， 这个class要handle 6个function：
* void set(string key, int value)  把key的val设成value
* int get(string key)                    返回key的val，如果没有返回-1
* void begin()                             cache之前的所有操作
* bool rollback()                         消除上次begin后的所有操作
* bool commit()                         把当前所有操作都写到memory里，也就是把memory的初始状态设成当前状态
* void unset(string key)             如果有key，那就把这个key踢了
可能只看描述有点难理解，这里举个例子(他的code是java写的，但是我自己写了个c++ version)：
InMemoryDB* db = new InMemoryDB();
db->set("a",1);
db->get("a") // return 1
db->unset("a")
db->get("a") // return -1
db->set("a", 2)
db->begin();
db->get("a"); // return 2
db->set("a", 3);
db->get("a", 3) // return 3;
db->rollback() // return true;
db->get("a") // return 2
db->rollback() // return false;
db->begin()
db->set("a", 5)
db->begin()
db->set("a", 7)
db->commit() // return true
db->get("a") // return 7
db->rollback() // return false
...
写的时候他会时不时打断我问我问题，感觉他总觉得我写的是错的。
最后写完了，他自己玩了会儿说啊好的，都对了，但是我觉得你这个可以再improve一下。他让我说哪里可以improve，我看了半天没看出来，他说你可以这样，我说我这样就错了，然后他固执己见，我懒得纠正他就说对对对你说的都对。然后就结束了。

3. System Design + Domain Knowledge。这轮75分钟。
这轮的面试官可能是个美国出生的亚洲人，英语666，全程边玩扑克牌边跟我聊天，我最后问他是不是对扑克情有独钟，他说玩扑克能帮他解压。我心想面试的时候我压力应该比你大……
先听我bb了20分钟我做的项目，然后说时间到，我们开始design。
design的题是：donation system
他会问我一些问题，我答他继续问，就这样结束了。
最后留了10分钟问问题。
4. HM的BQ轮。这轮45分钟，但是我问问题多了5分所以大概是50分吧。
上来先唠家常，嘿how are you啊，今天天气不错啊，你今天核算了么……
然后就是他自我介绍+我自我介绍，随后是BQ环节：你dive最深的一次debug经历；你最满意的一个project；你怎么帮助你们组提高diversity的；你从你manager那里收到过什么constructive的feedback。
然后他给我看了下他们现在在做的东西，感觉还是蛮多的，也挺有意思。能给我show一下他的屏幕也是有诚意。
最后他超时了就结束了。
这轮有意思的一点是：他在大麻呆了很久，碰巧我也在大麻，所以大家见面就很亲切，为什么？因为我们之间的切磋都是基于14条的，就看谁14条背得好了。让我印象深刻的是他离开大麻这么久还能滚瓜烂熟，在下佩服！



基本都是地里的题目
系统设计
捐款，问payment很久，比如说，第三方支付会失败(先要个dempotent key存在自己的db, 存好以后再去确认是否已经付款过), 需要很久(message queue), 第三方crash 之后处理变慢（自己存个pending table, 限速的扔到message queue）
如何通知用户(也可以用个单独的queue）(括号里是我自己的回答，不一定对...) 另外还说了些cache公司信息之类加速读取的，因为真正捐款比例少于看页面的人

bq
两个缺点
两个优点
过往项目





店面： 一个矩阵里最长的相同元素的长度。 用DFS和BFS分别写一遍
现场：

1. HM聊天
2. Leetcode 七五九类似的题目，但是要输入还有一个 [start, end], 最后的结果要在 [start, end]里面。 这轮挂了。
3. 设计 捐赠系统
4. 不需要算法的题，面试官是中国人，非常Nice。

最后是Soft Reject， 应该是第二轮面的比较糟糕。





一个矩阵里最大的相同元素的面积比较简单的dfs就能搞定。查边界条件的时候忘记包括0了导致第一次跑test case有几个没过
发现后及时改正就过了

拓展1: 同时返回元素。 比较长度的时候多一个变量记下元素就行
拓展2: 大矩阵无法全部放进内存。大概说了下想法，分治，在矩阵间和矩阵内做两层dfs，在相邻边界的元素上同时存上迄今为止这个元素最大的联通面积并传到下个矩阵遍历作为输入





给你开始时间，结束时间，duration，一个数组存着所有已经被book的区间，让你返回开始时间到结束时间内所有还没被book的区间。题目只有文字描述，自己定义input和output。写好后跑test case。看其他帖子里有要求自己写test case的。我的面试官比较好，不用我自己写test case，她都已经写好了，就看她在那边自己跑不同的test case。发现有个edge case没处理，我改了下代码。通过后问了下时间空间复杂度。

followup 1：如果给你n个人已经被book的区间，怎么做

followup 2：给你一个数组存着所有已经被book的区间，现在要book另一个meeting，问能够成功。假设input已经排好序，是否有更快的方法？

把刷题网有关区间那几题搞懂就可以了，重点关注漆芜灸，妖唲迩玖





面经题了，刷题网易散舞玖，分了三个部分：
1. 给定一个序列有pickup和delivery ，check是不是valid。取货要在送货之前，所有单最后都要送货完成
2. 给定N, 打印所有valid序列
3. 推导计算valid序列数量的公式





上周电面，今天刚收到vo的通知。题就是地里高频的PnDn，要求返回所有可能的结果，附加问题是求总数的推导公式。面试官是个非常奈斯的中国人小哥哥。



LC 759，变了一点小形，输出不光是free timeslot，还需要那个timeslot哪几个employee是free的
完全没准备这公司事后发现是高频题，现场没来得及研究，就表演一下挂掉了



核心算法还是拓扑排序，题目解法类似course schedule。 输入为n个package，和packages之间的dependence关系。如果package没有dependence会用-1代替。但不是每一个没有dependence的package都有-1这一条数据。followup类似course schedule 2。问了时间空间复杂度。第二天通知过了。





题目类似刷题网 流久无， 有略微的改动，矩阵中是任意正整数， 数字相同的临近位置算一个相互连通的block， 也是要求返回最大的block size





4/1 电面，一个很好的三姐，题目是找最近的k个外卖员。
             输入是json，里面包含经纬度以及rating。经过讨论后确认可以简化成两个数组，一个是经纬度，一个是（double）的rating，说了PQ的nlogn和nlogk的做法，最后让写了nlogk，并且自己写了test case，跑出来后问了几个问题
             电面三小时后收到了congrats，说strong positive,然后约onsite

4/30 VO
        第一轮 design ins，东欧大哥，说话很快，感觉有点aggressive，刚刚说一点后就会被追问为什么选这个不用那个。design在大哥的一路追问中结束。虽然比较aggressive，但是一开始明确说了你可以任意假设traffic以及DAU，我只关心how to handle large scale with reliability，并且加了一个额外条件是user发的ins可以是private和public。

         最后讨论出来的scope是
          1. user可以发private, public的ins
          2. user can follow/unfollow another user
          3. user can view his own and other user's homepage(need to consider filter function for private ins)
          4. user can view his timeline
          5. user can like and comment on ins
          6. no need to consider reply comment or like a comment
    
        第二轮是一个staff的印度小哥，题目是找最大岛，说了BFS和DFS，最后写了DFS，10分钟搞定后小哥说没有其他题目了，然后就开始闲聊。先比较了一下DFS vs BFS，然后扯到JVM stack size， heap size，how to configure stack size. why doordash migrate from RabbitMQ to kakfa. 总体来说这一轮更像是behavior and tech discussion，做题10分钟，聊天50分钟
    
        第三轮是HM，继续behavior，聊到了diversity，biggest failure, leadership
    
        第四轮是另外一个三哥，也是高频的order pickup and delivery题
             1. 判断给出sequence是否valid
             2. 给出n，生成all valid sequence
             3. 给出n，求number of sequence，需要给出递推公式和通项公式



1 value 和 system design  小ABC 或者 半二代，感觉英语不是很6

对方先是迟到大概8-9 min 然后上来直接dive project
说是dive project 但实际我看他也没怎么听，一直在那里不知道干啥呢。。。感觉在翻题库
然后问的问 和 我讲的也对不太上。。。
人为刀俎 没办法 忍
叨逼叨逼叨了大概20多分钟，还没进入系统设计主题，外加他的迟到。。。 真是无语

设计 inst
好不容易系统设计了，我刚开始从function讲起，他发现时间不够了，然后让我跳过，说只讲 feeding 。。。。

年轻人不按套路出牌啊。。。
弄的我一阵慌乱，只能先跳过自己的路数，按照他的讲，后面找时间补讲了一下。最后时间很紧，也没问什么问题。

2 coding  也是abc
most popular 3 pages
面经的题，我以前也没怎么准备，小众题，不知道后面有什么follow up，所以赶着时间写的，几分钟秒了
问我复杂度，问是否有提升空间
已经是On了所以说没什么改进空间
然后问 如果数据量惊人怎么办。。。 能怎么办，还不是要一个一个扫。。。 后来他说分布式系统怎么办。。。 遂答 map reducing
然后竟然没有follow up question了，然而这一轮是一小时，此时还有40min left

绞尽脑汁问他问题。。。 这个累啊 心累

3 HM 随便聊 国人大哥，人不错，看过linkedin 经历nb
网络略差，后面关了摄像头
说好的diversity呢， 我准备了好几个答案啊， 竟然没问。。。

4 coding 美国小哥 fraud department的
project 跟我聊了15min，感觉对我之前的东西很有兴致。
这个把我急的啊。。。 赶紧coding啊。。。
大概18min的时候，他说来吧 coding ，然后在哪里翻题库估计是，找了2分钟。。。。
最后 拓扑排序，就是 a on b， b on c，，， 等等之类





1. 系统设计：捐款系统。大家注意一下数据库选择，要用SQL，问了不少数据库的scale问题。
2.扣钉1:：dependency graph
3.扣钉2: 伊尔叁伍
4.BQ：必问问题，diversity。好好准备一下





电面还是地里的老题，topo sort，但是面的时候发现面试官会想让你自己把需求和模型说出来，而不是单纯的写topo sort。大家要注意各种Corner case是否需要handle，不能纯背course schedule





刷题网站   起舞就
额外有一个startTime, endTime and minDuration. 需要单独判断一下
end = min(pos.first : endTime);start = max(start, startTime);if (end - start >= minDuration) {
      res.push_back({start, end});
}





很常规的一道题，不知道是不是leetcode原题。

Largest Contiguous Block

给一个图（vector<vector<int>>)，如果数字连续递增就算相连

找图里最大个相连子图

大概思路就是每一个点，从这个点出发做dfs找所在的最大子图。过程中记得已经访问过的别再访问一次就行





Given a set list of pickups and deliveries for order, figure out if the given list is valid or not.
A delivery cannot happen for an order before pickup.
Examples below:
[P1, P2, D1, D2]==>valid
[P1, D1, P2, D2]==>valid
[P1, D2, D1, P2]==>invalid
[P1, D2]==>invalid
[P1, P2]==>invalid
[P1, D1, D1]==>invalid
[]==>valid
[P1, P1, D1]==>invalid
[P1, P1, D1, D1]==>invalid
[P1, D1, P1]==>invalid
[P1, D1, P1, D1]==>invalid







门冲的题都是地里的

店面： 刷题网凉摆 但是是求最大面积
VO:
1. 经典刷题网 姨散吴久。 三问，先看是不是合格的，然后给n生产所有合格的，最后是推导通项公式
2. 刷题网 姨儿散吴
3. 设计捐赠系统
4. bq. 准备一下diversity的



餐馆的菜单用一个树表示，里面有value， active， index， 孩子， 然后给你一个新菜单, 输入是新菜单和旧菜单，输出是多少个node有变化（更新，删除，添加）





前几天面的，两轮CODING，一轮挺不错，另一轮被三哥哥给黑了。三哥哥PASTE了一个HACKERANK的原创题？题目一共分3个部分，第一部分用DIJKSTRA找最短路径的VALUE, 第二部分用DFS，找出所有的最短路径。第三部分把所有最短的路径上的EDGE给打出来，而且是要打印EDGE对应的INDEX。MD，这题每个部分都可以自己成一小问了吧。题目巨长无比，我和三哥哥事先CLARIFY的时候，我问他是不是打印最短路径上的NODE，他点头说YES。结果DEBUG的时候才发现不是，是打印EDGE 对应的INDEX。题目给的是两个LIST, START_NODE_LIST, END_NODE_LIST, 所以你得先搞个MAP, 对应EDGE和INDEX, 并且EDGE是双向的，所以每个EDGE得存两份。总之输出结果的时候也巨烦。看着别人都是面筋题，到我这整这么一个题，太无语了。最后没跑通TEST CASES，跪了。三哥当时还说 我知道这是新题，我会TAKE THIS INTO CONSIDERATION的。。。
和HR反应的时候，HR态度冷冰冰，说 啊我知道这不好接受，但是我们现在的要求有点高，欢迎下次再试。





海投的工作，和hiring manager screening以后很快拿到店面。刷了他们家高频题，幸好题库比较小，都基本掌握了。
考官是个白人大叔，人非常nice，也很helpful。面试时候才知道是可以查syntax的，我不确定就和考官说我要查一下google一下，五秒钟google这样。
刷题网 药饿散舞原题，我读完题收到了惊吓，电面四十五分钟竟然考dp hard的题（这一道题我以为是VO的）
读完题我画图，然后还是解出来了，后面出现一个小bug就debug了一会，和考官互动很多，跟他说 我要去画图的那个页面，他会说 I'm following
考官大叔人太好了，超时都没催我，所以我心理上还是觉得有希望的，就继续debug。
最后超时了五分钟才找到了bug，run了三个test case这样都过了。然后chat了一下，简直满分考官。大叔主动说大概两个工作日收到回





coding1: 蠡口漆洱幺
*Problem Statement: Consolidate and eliminate duplicates in the list of usernames and their email addresses.*

  *Example 1:*
  *---------*
  *A: a1, a2            A: a1, a2, c1, d1*
  *B: b1                 B: b1*
  *C: c1, a2    ===>  E: e1*
  *D: d1, c1*
  *E: e1*

  *Example 2:*
  *---------*
  *A: a1, a2               A: a1, a2, b1, b2*
  *B: b1, b2    ===>*
  *C: b2, a1*

coding2: 第一题写完还有时间多所以又问了一题
*Given a streaming data of the form (timestamp, value), find the maximum value in the stream in the last X seconds.*

*Assume time is monotonically increasing.*
*Assume time is in the order of seconds.*
*max_value() function finds the max in the last X seconds.*

*StreamProcessor(5) // last 5 seconds*
*set_value(0, 5)*
*set_value(1, 6)*
*set_value(2, 4)*
*max_value(3) = 6 -> always the current time*

*class StreamProcessor:*
  *def __init__(self, x):*
    *self.x = x*

  *def set_value(self, t, v):*
    *pass*

  *def max_value(self, cur_t):*
    *pass*



A dasher sometimes travels between cities. To avoid delays, the dasher first checks for the shortest routes. Given a map of the cities and their bidirectional roads represented by a graph of nodes and edges, determine which given roads are along any shortest path. Return an array of strings, one for each road in order, where the value is YES if the road is along a shortest path or NO if it is not.The roads or edges are named using their 1-based index within the input arrays.*

*Given a map of g_nodes = 5 nodes, the starting nodes, ending nodes and road lengths are:*

*Road Index  from-city/to-city/weight*

  *1    (1, 2, 1) -> bi-directional*
  *2    (2, 3, 1)*
  *3    (3, 4, 1)*
  *4    (4, 5, 1)*
  *5    (5, 1, 3)*
  *6    (1, 3, 2)*
  *7    (5, 3, 1)*

*The traveller must travel from city 1 to city g_nodes, so from node 1 to node 5 in this case.*

*The shortest path is 3 units long and there are three paths of that length: [1 → 5], [1 → 2 → 3 → 5], and [1 → 3 → 5].*

*Return an array of strings, one for each road in order, where the value is YES if a road is along a shortest path or NO if it is not. In this case, the resulting array is*

*[roads 1, 2, 3, 4, 5, 6, 7] -> ['YES', 'YES', 'NO', 'NO', 'YES', 'YES', 'YES']. The third and fourth roads connect nodes (3, 4) and (4, 5) respectively. They are not on a shortest path, i.e. one with a length of 3 in this case.*

system design:
Donation Web ApplicationThis is an event that’s going to run for 3 days. We have a static list of 50 charities. During the event the web app should accept form submissions with the following info:(name, cc #, cvv, address, email, amount, charity). We should NOT store any credit card information in any persistent store (aside from stripe) to avoid a time consuming PCI compliance audit, we can however store the stripe token persistently. We should try to process their payment, the money will go into DD acct. At the end of the 3 days accountants will query DB we establish for records of how much to pay and to whom.

Stripe (HTTP) APIsstore(cc #, cvv, name, address) -> Result(stripe token) / FailureReason. Very fast and very reliable
charge(stripe token, amount[, idempotency key]) /Success/Failure. Very slow and much less reliableCould go down for several hours

bq：和hm聊天





给一个餐馆位置以及一组driver位置，返回离餐馆最近的k个driver。clarify后这k个driver要按照离餐馆由近到远返回。

实现一个rate limiter，leetcode上应该有原题。

本帖最后由 匿名 于 2021-6-14 13:23 编辑

店面：
以下内容需要积分高于 66 您已经可以浏览

给一个餐馆位置以及一组driver位置，返回离餐馆最近的k个driver。


clarify后这k个driver要按照离餐馆由近到远返回。

onsite coding round 1：
以下内容需要积分高于 66 您已经可以浏览

实现一个rate limiter，leetcode上应该有原题。



onsite coding round 2:
1.类似于meeting interval，给一个人的已经booked meetings 时间列表，以及一个duration，推荐一个available时段，也就是返回一个大于等于这个duration的时段。
比如： [[10, 50], [70, 100], [120, 150]], duration = 40, 则返回 [100, 140]. 又比如duration = 100, 则应返回 [150, 250].
clarify后，时间从0开始。
2. follow up： 给了n个人的booked meetings，以及duration，返回所有人可以参与的推荐时段。

onsite system design round：设计一个类似亚麻产品评论，用户可以对一个产品提交评论，可以对别人的评论点赞，可以查看一个产品的所有评论，并且能展示最高赞的几个评论。







Compare two trees.
A tree can have multiple childs and a several attributes.

Return the key of not completely equal nodes.

Example,

Tree 1
         A  [ true, 1 ]
    B          C            D           E
[ true, 2]  [false, 3] [true, 4] [false, 5]
                                                          \
                                                           F [ true, 6 ]


Tree 2
         A  [ true, 1 ]
    B         C            D           E
[ true, 2]  [false, 6] [false, 4] [false, 5]

Return:
C D F

Explain:C ( 3 != 6 ), D ( true != false ), F ( F is missing in Tree 2 ) 





题目是一个bi-directional graph, 然后有一些edge定义为(start_node, end_node, weight). 需要找出从node1-->nodeN所有的最短路径



LC 邀貳參武



首先是一个take home data challenge做一个prediction task，我觉得题出的还是挺好的，比较能全面考察一些data mining trick。

昂赛4轮，前两轮考的很business sense driven，配合很多A/B testing的问题，然后是一轮ML（很正常，不深），最后director A + hiring manager B面试。我个人感觉虽然没有聊出什么火花但是回答的还凑合吧。

然后说要加面一轮hiring manager面试（不知道为啥，就预感不太好），说分组没问题，就是分给manager B，加面是要一些别的signal也不知道要啥signal。显示的是加面这一轮面试官除了manager B还有另外一个manager C。
结果加面当天只有C出现，也没啥太难得问题，就是聊了半小时天，挂。

我最开始以为是B report给C, C report给A，所以C是以未来skip level manager的身份挂我的。后来问了在那里的朋友，其实B/C是平行的manager，都report给A，这就让我更加confused了。。。





同这一题，后悔没有提前写一遍，当场写出了几个bug,最后时间不够没有debug 完。完了后自己十分钟就搞定了。

https://www.1point3acres.com/bbs/thread-770584-1-1.html

教训：
1. 不易扯谈太久，跟面试官谈了20分钟，最后只有40分钟做题导致没debug完。
2. 下午不宜面试，脑袋容易不清醒。

贴一下我的代码吧,我用的dfs.





题目比较有意思，感觉是小哥自己出的题， 有点类似简易版的word ladder II

题目大概就是说， doordash 送餐有几条路线， 让你求出从a 到b的最短路径

给你一个list of tuples
Road from/to/weight
1 (1, 2, 1)
2 (2, 3, 1)
3 (3, 4, 1)
4 (4, 5, 1)
5 (5, 1, 3)
6 (1, 3, 2)
7 (5, 3, 1)

第一行 `1 (1, 2, 1)` 表示 road 1 这条路上 连通了city 1 和 city 2, 需要的weight是1.
那么 从 City 1 到City 5 的 shortest path collections: 1 → 5, 1 → 2 → 3 → 5, and 1 → 3 → 5.
要求输出: ['YES', 'YES', 'NO', 'NO', 'YES', 'YES', 'YES']， 表示road 1，2，5，6，7 在shorted path上

题目本身不难，但是实在hackerrank上写，要自己import library 和写test case。 尽量多和面试官沟通 把test case过一遍就没问题。

顺便再po一下我的代码哈
import java.util.*;

 class Solution {
      
     public static void main(String[] args) {
         Solution shortestPath = new Solution();
         Map<Integer, List<Integer>> map = new HashMap<>();
         map.put(0, Arrays.asList(1, 2, 1));
         map.put(1, Arrays.asList(2, 3, 1));
         map.put(2, Arrays.asList(3, 4, 1));
         map.put(3, Arrays.asList(4, 5, 1));
         map.put(4, Arrays.asList(5, 1, 3));
         map.put(5, Arrays.asList(1, 3, 2));
         map.put(6, Arrays.asList(5, 3, 1));
          
         List<Integer> cities = Arrays.asList(1, 2, 3, 4, 5);
          
         boolean[] res = shortestPath.shortestPath(map, cities);
          
         for (boolean used : res) {
            System.out.println(used + ", ");
         }
     }
      
    // given a map of bidrectional routes
    // find a shortest path
    public boolean[] shortestPath(Map<Integer, List<Integer>> map, List<Integer> cities) {
        // 1 (1, 2, 1)
        // 1 -> [2, 1, 1]
        Map<Integer, List<int[]>> graph = new HashMap<>();
         
        for (Map.Entry<Integer, List<Integer>> entry : map.entrySet()) {
            int road = entry.getKey();
            List<Integer> value = entry.getValue();
            int from = value.get(0);
            int to = value.get(1);
            int weight = value.get(2);
             
            graph.computeIfAbsent(from, k -> new ArrayList<>()).add(new int[]{to, weight, road});
            graph.computeIfAbsent(to, k -> new ArrayList<>()).add(new int[]{from, weight, road});
        }
         
        // [city_id, sumOfWeight]
        PriorityQueue<int[]> pq = new PriorityQueue<>((a, b) -> a[1] - b[1]);
        Set<Integer> visited = new HashSet<>();
        pq.offer(new int[]{cities.get(0), 0});
        int targetCity = cities.get(cities.size() - 1);
        int lowestWeight = 0;
         
        while (!pq.isEmpty()) {
            int[] entry = pq.poll();
             
            if (entry[0] == targetCity) {
                lowestWeight = entry[1];
                break;
            }
             
            visited.add(‍‌‍‍‍‌‌‌‌‍‌‍‍‌‌‌‍‌entry[0]);
             
            for (int[] neis : graph.get(entry[0])) {
                if (!visited.contains(neis[0])) {
                    pq.offer(new int[]{neis[0], entry[1] + neis[1]});
                }
            }
        }
         
        boolean[] res = new boolean[map.size()];
         
        dfs(cities.get(0), targetCity, graph, lowestWeight, res, new HashSet<>());
        return res;
    }
     
    private void dfs(int from, int target, Map<Integer, List<int[]>> graph, int weight, boolean[] res, Set<Integer> roads) {
        if (weight < 0) {
            return;      
        }
         
        if (from == target) {
            for (int road : roads) {
                res[road] = true;
            }
        }
         
        for (int[] neis : graph.get(from)) {
            // add the road
            if (!roads.contains(neis[2])) {
                roads.add(neis[2]);
                dfs(neis[0], target, graph, weight - neis[1], res, roads);
                roads.remove(neis[2]);
            }
        }
    }
 }







1. HM，聊天，问了关于 diversity 的问题，要特意准备一下。
2. 印度小哥，验证和解数独，很快写完，开始聊天，小哥也是从血汗工厂出来的，一起吹捧了一下血汗工厂的内部工具如何好用，聊得满开心的，提前了近10分钟结束。
3. 系统设计，也是一道高频题，设计一个产品的review系统，用户可以对每个‍‌‍‍‍‌‌‌‌‍‌‍‍‌‌‌‍‌review打分，高分的review可以得到coupon什么的。
4. 白人小哥，利口 幺儿伞舞，加了一个开始时间和结束时间，也很快写完







本帖最后由 primbo 于 2021-7-10 09:55 编辑


1. course schedule , 拓扑排序。2. 捐款系统。
3.     Node {
       string key,
         int value,
       list<Node> children;
    }

curTree             a(4)
             b(1)             c(5)
     d(3) e(5) f(8)              g(12)

newTree          a(4)
             b(1)          m(5)
     e(5) d(3) w(8)         g(12)

find the differenc‍‌‍‍‍‌‌‌‌‍‌‍‍‌‌‌‍‌e.   

解释： 一共5个diff .   
c(5)  变成了m(5)  所有的subTree 都认为变了，一共四个。 c(5), g(12), m(5), g(12)
f(8) 变成了 w(8).
虽然d(3) 和e(5)的顺序变了，但是不影响。







题目是输入3个array分别是城市名字，城市的x坐标，城市的y坐标，和1个int 城市的数量. 输出是一个string‍‌‍‍‍‌‌‌‌‍‌‍‍‌‌‌‍‌ array, 对应的是输入城市名字到临近城市中最近的城市名，如果没有就是“none”, 所谓的临近城市的定义是指两个城市只有x坐标或者y坐标有一个完全相同才可以被看作是临近的城市。 这题做完后还有follow up问题但我没有来得及看。





VO当天第一场的天竺友人没有到场，临时改成让第二场面试先开始，最后一场coding面试由一位华人程序员补上。第一题地里的高频数独题，分别是验证数独和解数独，之前做了六七遍，test case什么的都通过了。第二场系统设计，是设计restaurant food review system，不是高频的donation/instagram/yelp，准备的不是非常充分。第三场是华人程序员的面试，看领英是几个月前刚从亚麻跳槽来这里的，出的也是地里有人提到过的题，给定两棵多叉树，每个节点有key，value，和无序的children list。如果两个节点的key不一样，就认为是不同节点。如果是value不一样，就认为节点有更新。需要找到两棵树所有新增，删除，和更新节点个数。面试的时候说了下思路，就写下代码。代码逻辑没有什么问题，test case通不过，面试官也看不出来有什么问题。面试超时五分钟，面试官说可能是他test case用Java写的，转到C++14可能有问题就先过了。BQ面试天竺HM亲自上场，问了di‍‌‍‍‍‌‌‌‌‍‌‍‍‌‌‌‍‌versity，weakness等常见问题。三天后受到拒信，说是technical rounds didn't produce expected results，也没有更具体的feedback。





全是面经　提供个数据点
海投 五月份 电面 齐久武
onsite 六月份初
2轮算法  刘久武 和 package dependency
package 指的是安装包，每个包会给出一些prerequisite。 最终是要求某一个包的安装序列 所以不是所有出现的包都会用到。基本是topological sorting，地里有人说用单纯bfs也行 不过我没写出来。

1轮 BQ。大体准备过亚麻得都差不多， 会别别人多一道diversity的题， 比如： have you done anythign to improve the diversity of your team?

1轮 系统设计： 经典的捐款系统， 一开始是没有login 和固定的捐款项目。一般先画一个基本的working， 然后在scale up，加功能， 增加availability之类的。





第二轮coding: 给一个undirected connected graph，一个起点一个终点，返回从起点到终点的所有最短路径上的edges，最短路径不唯一，只要某个edge存在于某个最短路径之中，此edge就要被包含于结果之内。









design：刷题网站
问了如何设计i18n
设计一个在线评论系统
设计一个ins电商的竞价拍卖功能，假设这样物品有很多人拍卖怎么办
facebook status search
黑车设计
design youtube video service
设计一个short link service
typeahead/auto complete
可以随时查找一定范围内所有的餐馆，返回餐馆的位置和评价等相关内容
设计一个instagram。一开始把requirement都列好了，然后开始设计。中间问了几个问题: photo upload失败怎么办？需要多少host？
设计 top k song
设计一个拍卖系统
distributed web crawler，这道题完全是要考分布式
newsfeed





slack, 群聊


设计一个慈善捐赠系统，需要做到以下几个功能：

1. 用户选择某个慈善机构，点击捐赠，然后跳出信用卡界面支付
2. 后台会需要跟信用卡接口进行对接，也就是说这个系统不负责支付细节
3. CEO需要知道每个慈善机构的捐赠数量，然后统一用一张pay check打到慈善机构的银行账户
   我比较具体地分析了需求，交流下来确定这个系统不会有很高的qps之类，然后大概画了一下图，讲清楚了每个流程。他的问题是如果信用卡对接的API崩了怎么办，我就说可以用一个pending状态，等到恢复之后再试。或者直接在页面里告诉用户现在无法支付。总体沟通下来老哥挺满意。

功能上就是简单的网页，选择charity，还有捐款量，最后点donate

重点是charge event如何避免fail，第三方API挂了怎么办（transaction加一个column status比如Pending Complete Cancelled）
面试官要求第三方API不会realtime返回结果，也就是不能立即知道是否charge成功（真的有这种第三方API吗，难道不会破产吗hhhhh）
我给的解决方案是create DB scheduler event，扫一遍table把所有Pending状态的transaction的last_check_timestamp更新成当前时间，这样会产生一个binlog，Debezium监听这个change log发一个change event给kafka，consumer是一个verify_status service去call第三方API从而verify是否charge成功，成功了就更新数据库status为Complete。
第三方API挂了怎么办？ 这时Verify_service会返回NOT_FOUND，重新charge就好了。

捐款，问payment很久，比如说，第三方支付会失败(先要个dempotent key存在自己的db, 存好以后再去确认是否已经付款过), 需要很久(message queue), 第三方crash 之后处理变慢（自己存个pending table, 限速的扔到message queue）
如何通知用户(也可以用个单独的queue）(括号里是我自己的回答，不一定对...) 另外还说了些cache公司信息之类加速读取的，因为真正捐款比例少于看页面的人

大家注意一下数据库选择，要用SQL，问了不少数据库的scale问题。

Donation Web ApplicationThis is an event that’s going to run for 3 days. We have a static list of 50 charities. During the event the web app should accept form submissions with the following info:(name, cc #, cvv, address, email, amount, charity). We should NOT store any credit card information in any persistent store (aside from stripe) to avoid a time consuming PCI compliance audit, we can however store the stripe token persistently. We should try to process their payment, the money will go into DD acct. At the end of the 3 days accountants will query DB we establish for records of how much to pay and to whom.

Stripe (HTTP) APIsstore(cc #, cvv, name, address) -> Result(stripe token) / FailureReason. Very fast and very reliable
charge(stripe token, amount[, idempotency key]) /Success/Failure. Very slow and much less reliableCould go down for several hours


Question:
- Charity list pre-define/dynamic?
- payment strategy self-implement/stripe
- anonymous/not
- currency
- pay charity realtime/batch every week/month

Func requirement:
- list pre-defined charities
- store user donation amounts
- user can donate multiple charities

nonfunc requirement:
- fault tolerant
- scalable
- HA
- latency not important
- data consitency not important


estimate:
1M donation/per day = 12 donation/s 
50 Byte / donation
bandwith 600 B/s
120G ~ 5 year
add 30% buffer and two replica: 500G

data:
- id
- userid
- amount
- currency
- charity_id
- message
- timestamp
- status
- stipe_id


api design:
- donateMoney(userId, message, charityId, timestamp, paymentInformation) -> async -> donateId
- getStatus(donateId)->success, pending, failed...

client -> LB -> APP server -> backend server -> data storage(SQL)

                                 \-> stipe -> payment id -> MQ -> consume check/update db
    
                                 db scheduler check pending payment, add to MQ



菜单review系统，可以看或者发review，可以点赞，对高赞用户有奖励。
设计一个类似亚麻产品评论，用户可以对一个产品提交评论，可以对别人的评论点赞，可以查看一个产品的所有评论，并且能展示最高赞的几个评论。
设计一个产品的review系统，用户可以对每个‍‌‍‍‍‌‌‌‌‍‌‍‍‌‌‌‍‌review打分，高分的review可以得到coupon什么的。

Question:
can one user like on review multiple times?
like/dislike?
Function:
- User can review an item
- User can see the review and like
- review with higher like should be list in front
No function:
- Cannot lost review
- like count can has latency
- HA
- Fault tolerent

Handle hot product/reivew

estimate:
1M review/day -> 12/s
10 * like, 120/s

100 Byte/review
10 Byte/like
200 * 12 = 2K/s

200 * 86400 * 365 * 10 = 60G
(60 + 20) * 3 = 240G

data model
product: product_id, description, price, remaining...
user: user_id, email, creation_time, ...
review: review_id, product_id, content, datetime
like: user_id, product_id
like_count: review_id, count

api:
postReview(user_id, product_id, content)
getReviews(product_id, page, size) -> review_id
likeReview(user_id, review_id)
getLikeCount(review_id)

post review: client -> LB -> App server -> Backend server -> DB(SQL)
get review: client -> Cache(LRU) -> App server -> ...
like review: client -> LB -> App server -> MQ (buffer) -> consumer(Batch update/5s)(dedup) -> DB
get like count: client -> Cache -> App server -> ...

hot product/review, hold by some server/db
other can shard by id, LB by RR

# Robinhood

## Karat

### Coding

一堆课，找出上课顺序里,中间的那门课，只有一种正确的顺序，并且每个课只会对应另外一个prereq
比如

    ["Data Structures", "Algorithms"],
    ["COBOL", "Networking"],
    ["Algorithms", "COBOL"],

"Data Structures"->"Algorithms" -> "COBOL"-> "Networking"

返回 “Algorithms"

```python
from collections import defaultdict
def middle_course(pre_request):
    edge = {}
    pre = set()
    for x, y in pre_request:
        edge[x] = y
        pre.add(y)
    start = ""
    for x, _ in pre_request:
        if x not in pre:
            start = x
            break
    path = [start]
    next_course = edge[start]
    while next_course:
        path.append(next_course)
        if next_course in edge:
            next_course = edge[next_course]
        else:
            break
    return path[(len(path)-1) // 2]
```



/*
有多种track，返回所有path里的中间那门课

Sample input 1:
all_courses_1 = [
    ["Logic", "COBOL"],
    ["Data Structures", "Algorithms"],
    ["Creative Writing", "Data Structures"],
    ["Algorithms", "COBOL"],
    ["Intro to Computer Science", "Data Structures"],
    ["Logic", "Compilers"],
    ["Data Structures", "Logic"],
    ["Graphics", "Networking"],
    ["Networking", "Algorithms"],
    ["Creative Writing", "System Administration"],
    ["Databases", "System Administration"],
    ["Creative Writing", "Databases"],
    ["Intro to Computer Science", "Graphics"],
]

Sample output 1 (in any order):
          ["Data Structures", "Networking", "Creative Writing", "Databases"]

All paths through the curriculum (midpoint *highlighted*):

Intro to C.S. -> Graphics -> *Networking* -> Algorithms -> Cobol
Intro to C.S. -> *Data Structures* -> Algorithms -> COBOL
Intro to C.S. -> *Data Structures* -> Logic -> COBOL
Intro to C.S. -> *Data Structures* -> Logic -> Compiler
Creative Writing -> *Databases* -> System Administration
*Creative Writing* -> System Administration
Creative Writing -> *Data Structures* -> Algorithms -> COBOL
Creative Writing -> *Data Structures* -> Logic -> COBOL
Creative Writing -> *Data Structures* -> Logic -> Compilers

Visual representation:

                    ____________    ______________
                    |          |    |            |
                    | Graphics |    | Networking |
               ---->|__________|--->|____________|
               |                       |      
               |                       |      
               |                       |  ______________
____________   |                       |  |            |
|          |   |    ______________     >->| Algorithms |--\     _____________
| Intro to |   |    |            |    /   |____________|   \    |           |
| C.S.     |---+    | Data       |   /                      >-->| COBOL     |
|__________|    \   | Structures |--+     ______________   /    |___________|
                 >->|____________|   \    |            |  /
____________    /                     \-->| Logic      |-+      _____________
|          |   /    ______________        |____________|  \     |           |
| Creative |  /     |            |                         \--->| Compilers |
| Writing  |-+----->| Databases  |                              |___________|
|__________|  \     |____________|-\     _________________________
               \                    \    |                       |
                \--------------------+-->| System Administration |
                                         |_______________________|

Sample input 2:
all_courses_2 = [
    ["Course_3", "Course_7"],
    ["Course_0", "Course_1"],
    ["Course_1", "Course_2"],
    ["Course_2", "Course_3"‍‍‍‌‌‍‍‍‍‍‌‍‍‍‍‍‍‍],
    ["Course_3", "Course_4"],
    ["Course_4", "Course_5"],
    ["Course_5", "Course_6"],
]
Sample output 2 (in any order):
["Course_2", "Course_3"]

Complexity analysis variables:

n: number of pairs in the input

*/

```python
def middle_course2(pre_request):
    def dfs(cur, path):
        if not edge[cur]:
            res.add(path[(len(path)-1) // 2])
            return
        for next_course in edge[cur]:
            if next_course not in visit:
                visit.add(next_course)
                dfs(next_course, path + [next_course])
                visit.remove(next_course)

    edge = defaultdict(list)
    in_degree = defaultdict(int)
    for x, y in pre_request:
        edge[x].append(y)
        if x not in in_degree:
            in_degree[x] = 0
        in_degree[y] += 1
    res = set()
    visit = set()
    for k, v in in_degree.items():
        if v == 0:
            visit.add(k)
            dfs(k, [k])
            visit.remove(k)
    return list(res)
```



原始问题是给name和timestamp，返回所有在一小时内打卡超过三次的name和对应的timestamp。一个tricky的点是timestamp是24小时制，比如855代表8:55am，1325代表1:35pm，在比较时间的时候不能直接相减，而要先做转化。
follow up是给name, timestamp和action (Enter or Exit)，找出在同一时间里都在房间里超过两次以上的group里人最多的那个group，返回里面的所有人和对应的interval。



https://leetcode.com/discuss/interview-question/1144222/Karat-Interview-for-Robinhood-SWE



新鲜罗兵侠店面，新题，用topological sort算一个service mesh的loadfactor

给一堆service call relations和一个entrypoint，比如 [a:b,c, b:c] a意思就是a会call b和c，b还会call c，然后assume entrypoint a有一个request，这样a的load就是1，b也是1，c是2。就是每个service都会completely fanout它收到的requests，比如如果c要有downstream的话，c给他每个downstream的load就是2.

用topological sort做，要注意除了entry‍‍‍‌‌‍‍‍‍‍‌‍‍‍‍‍‍‍point之外还有别的service可能没有indegree，这些service 的load要是0，不然漏掉的话graph traverse不完

还要注意有些service的downstream是不存在的，ignore就好

```python
from collections import defaultdict
def load_factor(data, entry):
    in_degree = defaultdict(int)
    factor = {}
    for k, v in data.items():
        factor[k] = 0
        if k not in in_degree:
            in_degree[k] = 0
        for it in v:
            in_degree[it] += 1
            factor[it] = 0
    factor[entry] = 1
    q = [k for k in in_degree if in_degree[k] == 0]
    while q:
        cur = q.pop()
        if cur not in data:
            continue
        for out in data[cur]:
            factor[out] += factor[cur]
            in_degree[out] -= 1
            if in_degree[out] == 0:
                q.append(out)
    return factor
```



然后开始coding，题目是badge 打卡的题。给定很多<name, time> pairs, 表明某个人打卡记录，让找出是否有人一个小时内打卡了三次及以上。如果有人有多次 一小时内打卡三次及以上，只需要输出最早‍‍‍‌‌‍‍‍‍‍‌‍‍‍‍‍‍‍的一次即可。
eg.
["A", "1000"],
["B", "900"],
["B", "850"],
["B", "950"],
["B", "1200"],
["A", "1100"]

输出 B: 850, 900, 950.

```python
from collections import defaultdict, deque
def badge(data):
    dic = defaultdict(list)
    for x, y in data:
        y = int(y)
        dic[x].append(y // 100 * 60 + y % 100)
    res = []
    for k, v in dic.items():
        v.sort()
        q = deque()
        for t in v:
            q.append(t)
            while q[0] < t - 300:
                q.popleft()
            if len(q) >= 3:
                res.append((k, ["%d%02d" % (x//60, x % 60) for x in q]))
                break
    return res
```



https://www.1point3acres.com/bbs ... 6orderby%3Ddateline
knowledge based question和这篇面经里面的一样。coding是a list of logs，每个含有时间戳，用户和资源名字，要求返回任意3分钟之内被访问最多的资源和个数。有意思的是面试官开头就直接说不要求想出optimal的解法，只需要workable，楼主就直接用了暴力法，每个资源对应时间存在list里面再sort，然后两个for loop brute force，时间复杂度n^3。下来想了一下，用双指针n^2logn就够了。第二题是一个特别复杂的followup，刚刚解释完题目时间就到了.‍‍‍‌‌‍‍‍‍‍‌‍‍‍‍‍‍‍...，要求计算被资源被访问了probabilities，听完题目直接懵逼，不知道什么样的大神能在面试期间把这一题也做出来

后面半小时coding，说的是一个保安系统，记录了每个人打卡的时间。
找出来那些一小时内打卡超过3次的人，和一小时内打开的时间。



做题目只有三十分钟，第一题，给你一个vector<vector<string>>，每一个vector<string>里，第一个element是epoch timestamp，第二个是user ID，第三个是resource，问五分钟内被用频率最高的resource，和另一个同学应该是一样的题目（https://www.1point3acres.com/bbs ... 6orderby%3Ddateline）
这题其实和之前有人发过的一小时内access多次是一个类型的，我是用一个map然后two pointer写的，大家见仁见智哈～
写完只有七分钟了，小哥哥说第二题就说个思路吧，第二题其实我真的没看懂，我用我的微薄之力给大家解释一下，大家就当图个消遣吧。。。
还是相同的input，这次要输出一个probability path，path开始是每个resource作为第一个resource的可能性，接下来，如果这个resource有被用作第二个resource，那么这些res‍‍‍‌‌‍‍‍‍‍‌‍‍‍‍‍‍‍ource作为第二个resource的可能性，以此类推。



黑人小哥宛如毫无感情的读题机器。应该和地里的一位是同一个面试官。
三道System Design和地里都一样。十分钟答完。
说说第二部分coding，
问的我一道从来没见过的题，input大概如下：
String[][] logs = {
{"resource1", "user0", "300"},
{"resource2", "user1", "200"},
{"resource1", "user2", "500"},
{"resource3", "user0", "600"},
......
}
其中300 / 200 / 500之类的数字意思是离半夜12点整的秒数。
问5分钟的time window里，哪个resource的频率最高，次数是多少？
比如这里应该return {"resource1": 2}
读题理解题花了5分钟，和面试官解释自己的算法花了5分钟，最后就是写code，中途出现了一点小bug 但在结束之前都修好了。也分析了时间空间复杂度。
分析完面试官就要拜拜，我一惊，才40分钟，这不是还‍‍‍‌‌‍‍‍‍‍‌‍‍‍‍‍‍‍有时间么？面试官说coding严格限制在30分钟。



找出一个小时之类出入building 最多的人。
Notice： 这个是按小时group ， 每个人都有一个进出building record： name，[time1,time2,time3,time4]
可以先sort 一下这个时间， 然后计算每个小时出入building 次数  比如：  john ,  [1,6,61,71,81,100,120,300]   那么johon 一个小时之类 出入次数最高：【61，71，81，100】 =4

### Design

1. Google doc, 可以允许多个人访问同一个doc。每个server可以处理很多不同的doc，但同一个doc只由一个固定的server处理。也就是说访问同一个doc的所有request都会发到同一个server 处理分配doc的load balancer是round ronbin，问这个设计有什么问题。
答：round ronbin 两个缺点，第一默认所有server的处理能力相当。如果有的server比较强悍，有的server比较弱鸡，会造成资源浪费。round ronbin不考虑number of connection request a server received。比如一个server上的doc有很多人同时访问，那么有新的doc进来的时候最好就不要再发到这个server上，改进方法Least Connection load balancing。

```
For sharding by document: Hot document may cause a single machine down. So first we can use cache for read, and we can also sepreate the read/write operation. And we can shard the request by request Id, not by docId

If use Round Robin, first, it doesn't consider the performance of the server, some servers may has a lot of resource (CPU/memory), but others may has less resource. Second, RR doesn't consider the number of request of a server already received, so if some doc in a server already have a lot of connections, we should send the new doc to this server.
```

1. 判该下面三种情况哪种用strong consistency 哪种用 eventual consistency.  
  第一个是media stream的meta data （eventual）
  第二个是web 做user analysis，面试官说可以想象成一个web，显示的是hit counter。 （我答的eventual，不知道对不对）
  第三个是银行的deposit和withdraw （strong）
2. 还是doc， 如果所有的user sign了doc 就给每个user 发一个notification。但是由于系统的问题只有50%的doc 成功的给所有人发松了notifiction，问如果给那些没有成功发送notification的doc重新发送notification该怎么做。
  现有的条件是 1）database 里存着所有的doc id以及这个doc是否被所有user sign了。2） 有500个server，每个server会存有从该server成功发送notification的doc id

答：1）db里加一列表示是否成功发送过notification 2）500个server各自统计发送成功的doc id，然后对db分别做batch write 3）系统对db做batch get 拿到所有没有发送成功的docId，然后重新发送notification。

```
We can add a new column in the DB, which is whether the notification is already successfully send (pending, success, failed). For each server it can get all the docId which already successfully/failed send. And update the DB by batch. And another service will read the db every peroid of time, get all the failed docId, and resend the notification.
```

2. google doc 那个问题： hot read  单机挂掉， 某个doc hot/write read trafffic 很多 导致其他doc 很忙。 优化：hot doc   1. read only 加cache  / 2. 读写分离   3. 按traffic request ID 进行sharding
3. 找出没有成功攻发送notification 机器 地理面解决方案比较多。 无非就是数据量太多 怎么切分  这个互联网都做烂了东西。要不分表 要不分库  怎么切分 怎么建表区别







在一个server上有一个process同时处理多个video，现在发现同时处理超过10个video就会出错，但不知道具体bug是什么。问在debug期间有哪些workaround。

```
We can use a message queue as a buffer, so only the server is handle less than 10 videos, it will consume from the MQ.
```

全世界一万台自动售货机每天同一固定时间给一个server发状态，问这种设计有哪些问题。

```
At the time, the server will receive huge amount of request, which may cause the server slow/down, and in all other time, the server is in idle status.
```

要开发一个手机上的围棋游戏，现在要做一个feature是通过分析当前棋局给玩家提供下一步的建议，这个feature可以通过1）在手机端直接跑算法 2）把棋局发到server端，server端跑算法然后把结果返回给手机，问这两种approach各有什么优劣。

```
If run on the mobile, it will consume a lot of resource of the phone, make battery life shorter, make the phone very hot, and some low performance phone may take very long time to get the result. But we don't need transfer the game board to server, it will reduce bandwith. and also save a lot of server resource

If run on the server, any phone can play the game, even a very cheap one. But it will use more bandwith, if the connection is poor, may take some time, also it will use a lot of server resource
```



Design a job scheduler.
100,000 job
要求即能handler recurring job, 以及non recurring job. 计算需要多少台机器。楼主设计了一个架构之后，他会问每个component 如果fail 了怎么办。数据库选择‍‍‍‌‌‍‍‍‍‍‌‍‍‍‍‍‍‍用什么，为什么这么选。schema怎么设计。



1. 有十万个vending machine across the globe，每天晚上零点向a central server发一天的stock，central server有个Batch job process现有的库存，然后给每个machine发restock的信息。问这个system有什么问题
2. 一个photo share system，没有IG这么高端，只是upload photo然后拿到一个sharable link。问要estimate db storage和cost，需要哪些参数

```
DAU, how many photo will be upload/day, average photo size, size of user/photo information/metadata
```

1. 还是这个photo share，问如果data sharing用user id有什么问题

```
for the hot user, it will get a lot of request
```

1. 这题原题我已经记得很模糊了。。。好像是一个server上有很多process，一个bug bring down整个server，debug要很长时间，问这个时候怎么办
2. 这题我实在记不得了。。。
  其实如果大家看过一点educative.io上system design & scalability，应该都没什么问题～我记得我说了很多scalability, horizental scale, vertical scale, data sharing method, identify single point of failure, consistent hashing, load balancing, availability, etc.





1：给了一个doc server的setup，每个doc只能由一个server handle，现有的load balancer是round robin，fixed assignment， 问有什么问题，要如何解决
2:  给了三种情况，什么时候要用strong consistency，什么时候用evental consistency：a，一个API 要在20ms之内respond， b，click recording analystics database，c，有一个notification出了问题，应该每个doc签完字以后就发notification，但是现在有50%的doc没有发notificaton，怎么补发。一个db有所有doc签没签字的信息，500个server上有发notification的记录，可能有很多很多notification要发，怎么发

## Onsite

1st desigin robinhood， focus on placing an order，问了蛮多fail scenario
2nd project deep dive，
3rd coding， match orders 地里有原题，但是不太好写，就写了第一问‍‍‍‌‌‍‍‍‍‍‌‍‍‍‍‍‍‍，第二问接近写完，但是没有写完。



1. task scheduler
2. bq
3. margin call
初始balance 1000 买卖股票 打印出balance和手上的股票
followi up:
balance变负数 需要卖最高的股票 直到balanc‍‍‍‌‌‍‍‍‍‍‌‍‍‍‍‍‍‍e变正



第一輪coding 45 mins:
地裏street trades, house trades 那題，面經看到有人暴力解給過，再加上面經裡看到時間很緊，一上來先brute force 解完10/10 test cases. 面試官要求優化，第一題‍‍‍‌‌‍‍‍‍‍‌‍‍‍‍‍‍‍優化跑過測資5/5，沒時間寫第二題了，只用口頭描述演算法。現在想想可能是掛在這輪

第二輪 system design 1hr:
設計股票交易系統，限定買賣limit order。比較注重data modeling, 如何預防concurrent orders, insufficient balance, 如何failure recovery

第三輪 Project + BQ 1hr:
沒啥特別，聊得似乎滿開心的





股票买卖。其实只是涉及到很简单的string的parse。拿到ticker，价格什么的。最重要的是不考虑performance，所以我是比较暴力的解法。他说做出前两问就OK，第三问不用‍‍‍‌‌‍‍‍‍‍‌‍‍‍‍‍‍‍做

job scheduler。这个我有所准备，我个人感觉我cover了他要问的所有细节

BQ





第一轮coding：
A *trade* is defined as a fixed-width string containing the 4 properties given below separated by commas:

- Symbol (4 alphabetical characters, left-padded by spaces)
- Type (either "B" or "S" for buy or sell)
- Quantity (4 digits, left-padded by zeros)
- ID (6 alphanumeric characters)

e.g. `"AAPL,B,0100,ABC123"`

which represents a trade of a buy of 100 shares of AAPL with ID "ABC123"

Given two lists of trades - called "house" and "street" trades, write code to filter out groups of *matches* between trades and return a list of *unmatched* house and street trades sorted alphabetically. There are many ways to *match* trades, the first and most important way is an *exact match* (Tests 1-5):

- An exact match is a house_trade+street_trade pair with identical symbol, type, quantity, and ID

**Note: Trades are distinct but not unique**

For example, given the following input:

```
// house_trades:
[
  "AAPL,B,0100,ABC123",
  "AAPL,B,0100,ABC123",
  "GOOG,S,0050,CDC333"
]

// street_trades:
[
  " FB,B,0100,GBGGGG",
  "AAPL,B,0100,ABC123"
]
```

We would expect the following output:

```
[
  " FB,B,0100,GBGGGG",
  "AAPL,B,0100,ABC123",
  "GOOG,S,0050,CDC333"
]
```

Because the first (or second) house trade and second street trade form an exact match, leaving behind three unmatched trades.

Follow-up 1 (Test 6,7,8,9): A "fuzzy" match is a house_trade+street_trade pair with identical symbol, type, and quantity *ignoring* ID. Prioritize exact matches over fuzzy matches. Prioritize matching the earliest alphabetical house trade with the earliest alphabetical street trade in case of ties.

Follow-up 2: (Test 10) An offsetting match is a house_trade+house_trade or street_trade+street_trade pair where the symbol and quantity of both trades are the same, but the type is different (one is a buy and one is a sell). Prioritize exact and fuzzy matches over offsetting matches. Prioritize matching the earliest alphabetical buy with the earliest alphabetical sell.

第二轮system design：job scheduler

第三轮bq

收到feedback说technical不够强，要加面一轮technical。黑人问号脸？？？.jpg。followup1做出来后，还有时间做followup2，但是面试官让我停下来开始问问题。整个过程没什么卡住的地方，不知道哪里出了问题

第四轮coding：
Our goal is to build a simplified version of a real Robinhood system that reads a customer's trades from a stream, maintains what they own, and rectifies running out of cash (through a process called a "margin call", which we'll define later). We’re looking for clean code, good naming, testing, etc. We're not particularly looking for the most performant solution.

**Step 1 (tests 1-4): Parse trades and build a customer portfolio**

Your input will be a list of trades, each of which is itself a list of strings in the form [timestamp, symbol, B/S (for buy/sell), quantity, price], e.g.

[["1", "AAPL", "B", "10", "10"], ["3", "GOOG", "B", "20", "5"], ["10", "AAPL", "S", "5", "15"]]

is equivalent to buying 10 shares (i.e. units) of AAPL for 5 each at timestamp 3, and selling 5 shares of AAPL for $15 at timestamp 10.

**Input assumptions:**

- The input is sorted by timestamp
- All numerical values are nonnegative integers
- Trades will always be valid (i.e. a customer will never sell more of a stock than they own).

From the provided list of trades, our goal is to maintain the customer's resulting portfolio (meaning everything they own), **assuming they begin with $1000**. For instance, in the above example, the customer would end up with $875, 5 shares of AAPL, and 20 shares of GOOG. You should return a list representing this portfolio, formatting each individual position as a list of strings in the form [symbol, quantity], using 'CASH' as the symbol for cash and sorting the remaining stocks alphabetically based on symbol. For instance, the above portfolio would be represented as

[["CASH", "875"], ["AAPL", "5"], ["GOOG", "20"]]

**Step 2 (tests 5-7): Margin calls**

If the customer ever ends up with a negative amount of cash **after a buy**, they then enter a process known as a **margin call** to correct the situation. In this process, we forcefully sell stocks in the customer's portfolio (sometimes including the shares we just bought) until their cash becomes non-negative again.

We sell shares from the most expensive to least expensive shares (based on each symbol's most-recently-traded price) with ties broken by preferring the alphabetically earliest symbol. Assume we're able to sell any number of shares in a symbol at that symbol's most-recently-traded price.

For example, for this input:

‍‍‍‌‌‍‍‍‍‍‌‍‍‍‍‍‍‍```
[["1", "AAPL", "B", "10", "100"],
["2", "AAPL", "S", "2", "80"],
["3", "GOOG", "B", "15", "20"]]
```

The customer would be left with 8 AAPL shares, 15 GOOG shares, and 80 a share) to cover the deficit. Afterwards, they would have 6 shares of AAPL, 15 shares of GOOG, and a cash balance of $20.

The expected output would be

[["CASH", "20"], ["AAPL", "6"], ["GOOG", "15"]]

**Step 3/Extension 1 (tests 8-10): Collateral**

Certain stocks have special classifications, and require the customer to also own another "collateral" stock, meaning it cannot be sold during the margin call process. Our goal is to handle a simplified version of this phenomenon.

Formally, we'll consider stocks with symbols ending in "O" to be special, with the remainder of the symbol identifying its collateral stock. For example, AAPLO is special, and its collateral stock is AAPL. **At all times**, the customer must hold at least as many shares of the collateral stock as they do the special stock; e.g. they must own at least as many shares of AAPL as they do of AAPLO.

As a result, the margin call process will now sell the most valuable **non-collateral** share until the balance is positive again. Note that if this sells a special stock, some of the collateral stock may be freed up to be sold.

For example, if the customer purchases 5 shares of AAPL for 75 each, then finally 5 shares of AAPLO for 125, but their shares of AAPL can no longer be used to cover the deficit (since they've become collateral for AAPLO). As a result, 2 shares of GOOG would be sold back (again at 25, 5 AAPL, 5 AAPLO, and 3 GOOG. Thus, with an input of

[["1", "AAPL", "B", "5", "100"], ["2", "GOOG", "B", "5", "75"], ["3", "AAPLO", "B", "5", "50"]]

the corresponding output would be

[["CASH", "25"], ["AAPL", "5"], ["AAPLO", "5"], ["GOOG", "3"]

同样step2做出来后让我停下来问问。两轮technical的共同点是问如果这段代码让你作为code reviewer，会提什么意见
```





1  BQ deep dive
2 job schedular 面试官全程忙别的事情，我就自说自话，最后5min问了几个小问题 如何通知用户，如果queue挂了怎么办， DB 选哪种。。。。 我过程都讲了，他完全没听。。。。
3 老题了 股票最大利润那个，地理随便找找就有。。。 感觉复杂度啊之类的不是‍‍‍‌‌‍‍‍‍‍‌‍‍‍‍‍‍‍终点





第一轮bq，问题都比较常规
第二轮系统，要求设计一个cron job scheduler，怎么handle machine down的部分没有答好，最后也挂在这一轮了
第三轮做题，给两个trade的list，每个trade有四个symbol用逗号隔开，把不match的部分输出，followup是支持fuzzy match，就是前三个symbol‍‍‍‌‌‍‍‍‍‍‌‍‍‍‍‍‍‍ match就算match了





系统设计的面试
问题是假设RH在很多外部的广告平台投放广告，如何设计一个数据pipeline 日常的统计每个平台的CPA(cost per action).
假设有一下几个数据源

- 每个平台会定时给RH发送看到他们广告的用户的设备ID，时间戳。
- RH自己统计每天注册自己网站的用户ID， 设备ID，和时间戳
- 每天结束的时候RH可以向不同的广告平台发送一个请求，拿到每天的广告花费数额

输出
- 统计处每个平台每天的CPA（产生一个注册用户所花费的钱）

需要设计整个数据系统
- 怎么拿到数据，怎么存储实时数据（卡夫卡）
- 拿到后怎么整理，怎么存储，怎么备份
- 从数据上有什么问题（回答：设备ID可能有多个， 或者一个设备ID匹配到多个平台）
- 怎么防止failure
- 怎么‍‍‍‌‌‍‍‍‍‍‌‍‍‍‍‍‍‍检测 在哪里加检测
- 如果把每天的job变成realtime job 怎么弄？





经典的买卖股票匹配，两个pq解决，和db transaction找bug



coding：这篇帖子里的第四题原题。最后要跑test case，没有全部通过，应该是挂在这里了。

系统设计：任务调度器，推荐好好搜一下例子，这个有很多可以深入的地方，很容易被问倒。

BQ：常规问题，大哥人很不错。



第一轮：讲解做过的项目。
建议准备下，因为面试官会问得比较细。例如项目impact和产品客户的回馈等。

第二轮：白板算法题。Pseudocode就行。建议做完三题，至少两题。

第一题：Given a tree, find maximum sum of a subtree.
Example:
         -100
       /     \
     20       10
   /   \      /   \
-1     3   2     5
答案是22 (20 - 1 + 3)。Subtree不需要包括所有nodes的和。

第二题
参考 https://www.1point3acres.com/bbs/thread-573007-1-1.html 的第4轮（给一个list of task的那一题）。
解法：
https://www.geeksforgeeks.org/weighted-job-scheduling/
https://www.geeksforgeeks.org/weighted-job-scheduling-log-n-time/
以上两个解法是解比较复杂的version，但现场问的应该是“每个task的耗时固定为1”。

楼主自己糊涂了，之前准备了然后现场反而不会了，所以没有第三题。。

午饭 - 不计分

第三轮
系统设计。参考 https://www.1point3acres.com/bbs/thread-549652-1-1.html 的第4轮（Design brokerage system to handle NYSE/Nasdaq errors的那一题）。
只handle服务器和NYSE之间的buy order。

需要写下database table的schema。例如：
| order id | symbol | quantity | timestamp |
| user id | balance | 等
（只是举略下，还有一些其他的column）

有4种failure cases：
1. error happens at server side
2. error happens when sending request from server to NYSE
3. error happens at NYSE side
4. error happens when receiving response from NYSE to server
How to identify each failure case?

第四轮
A trade is defined as a string containing the 4 properties given below separated by commas:

Symbol (4 alphabetical characters, left-padded by spaces)
Side (either "B" or "S" for buy or sell)
Quantity (4 digits, left-padded by zeros)
ID (6 alphanumeric characters)
e.g.
"AAPL,B,0100,ABC123"

which represents a trade of a buy of 100 shares of AAPL with ID "ABC123"

Given two lists of trades - called "house" and "street" trades, write code to create groups of matches between trades and return a list of unmatched house and street trades sorted alphabetically. Without any matching, the output list would contain all elements of both house and street trades. There are many ways to match trades, the first and most important way is an exact match:

An exact match is a pair of trades containing exactly one house trade and exactly one street trade with identical symbol, side, quantity, and ID
Note: Trades are distinct but not unique

For example, given the following input:
house_trades:
[ "AAPL,B,0100,ABC123", "AAPL,B,0100,ABC123", "GOOG,S,0050,CDC333" ]
street_trades:
[ " FB,B,0100,GBGGGG", "AAPL,B,0100,ABC123" ]
We would expect the following output:
[ " FB,B,0100,GBGGGG", "AAPL,B,0100,ABC123", "GOOG,S,0050,CDC333" ]

Because the first (or second) house trade and second street trade form an exact match, leaving behind three unmatched trades.

Bonus 1 (Test 4 and 5): An attribute match is a match containing exactly one house trade and exactly one street trade with identical symbol, side, and quantity ignoring ID. Prioritize exact matches over attribute matches. Prioritize matching the earliest lexicographical house trade with the earliest lexicographical street trade in cas‍‍‍‌‌‍‍‍‍‍‌‍‍‍‍‍‍‍e of ties.

Bonus 2: (Test 6) An offsetting match is a match containing exactly two house trades or exactly two street trades where the symbol and quantity of both trades are the same, but the side is different (one is a buy and one is a sell). Prioritize exact and attribute matches over offsetting matches. Prioritize matching the earliest lexicographical buy with the earliest lexicographical sell.





第一轮system design：stock brokerage。重点在于如何validate orde是否可以执行（是有有足够的balance和securities），讨论了很久concurrency的问题。一般我习惯自己drive整个面试，但是面试官中间打断了我并且疯狂问我db这边的问题让我有点略微不适应，然后白板tool也很难用。。但可能面的还可以（我猜的），因为面试官最后问我是不是有经验感觉我对这块挺懂的。。第二轮coding：原题在这里第四轮 https://www.1point3acres.com/bbs/thread-577581-1-1.html  45min要写完所有题时间很紧，估计没写完所有的也问题不大。
第三‍‍‍‌‌‍‍‍‍‍‌‍‍‍‍‍‍‍轮deep dive：就讲讲自己的项目，面试官问问题比较犀利而且经常问到当时做项目的痛点上，感觉水平不错点个赞。





codin：螺旋矩阵

* end-to-end设计绿林好汉。重点问了order的数据库设计，还有order从自家服务器到交易所的过程。
* Design a datastructure for Stop loss order.
* Design an algo for finding a consecutive substring with given characters.
* Max Path Sum in ‍‍‍‌‌‍‍‍‍‍‌‍‍‍‍‍‍‍Matrix.





电面是讨论一个系统设计问题，设计一个job scheduling system, 数千个job，每个job可以设定running interval，每隔一段时间后自动执行，但一个job同一时间只能有一个running instance，如果上一次job还没有运行完，就算下个interval时间到也不能schedule执行。要求highly available，fault tolenrance，需要讨论所有component，db schema, job‍‍‍‌‌‍‍‍‍‍‌‍‍‍‍‍‍‍如何dispatch，etc





